<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 JavaScript for Shiny | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="A book about deeply customizing Shiny app for production." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 JavaScript for Shiny | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book about deeply customizing Shiny app for production." />
  <meta name="github-repo" content="DivadNojnarg/outstanding-shiny-ui" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 JavaScript for Shiny | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="A book about deeply customizing Shiny app for production." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-09-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="htmltools-other-tools.html"/>
<link rel="next" href="shiny-intro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#extra-material"><i class="fa fa-check"></i>Extra material</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#why-another-shiny-related-book"><i class="fa fa-check"></i><b>1.1</b> Why another Shiny related book?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#book-structure"><i class="fa fa-check"></i><b>1.2</b> Book structure</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#code-structure"><i class="fa fa-check"></i><b>1.3</b> Code structure</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#preliminary-exercices"><i class="fa fa-check"></i><b>1.4</b> Preliminary exercices</a></li>
</ul></li>
<li class="part"><span><b>Shiny’s foundations</b></span></li>
<li class="chapter" data-level="2" data-path="web-intro.html"><a href="web-intro.html"><i class="fa fa-check"></i><b>2</b> Shiny and the Web</a><ul>
<li class="chapter" data-level="2.1" data-path="web-intro.html"><a href="web-intro.html#shiny-generates-html-code-from-r"><i class="fa fa-check"></i><b>2.1</b> Shiny generates HTML code from R</a></li>
<li class="chapter" data-level="2.2" data-path="web-intro.html"><a href="web-intro.html#web-intro-html"><i class="fa fa-check"></i><b>2.2</b> HTML 101</a><ul>
<li class="chapter" data-level="2.2.1" data-path="web-intro.html"><a href="web-intro.html#html-basics"><i class="fa fa-check"></i><b>2.2.1</b> HTML Basics</a></li>
<li class="chapter" data-level="2.2.2" data-path="web-intro.html"><a href="web-intro.html#tag-attributes"><i class="fa fa-check"></i><b>2.2.2</b> Tag attributes</a></li>
<li class="chapter" data-level="2.2.3" data-path="web-intro.html"><a href="web-intro.html#the-simplest-html-skeleton"><i class="fa fa-check"></i><b>2.2.3</b> The simplest HTML skeleton</a></li>
<li class="chapter" data-level="2.2.4" data-path="web-intro.html"><a href="web-intro.html#about-the-document-object-model-dom"><i class="fa fa-check"></i><b>2.2.4</b> About the Document Object Model (DOM)</a></li>
<li class="chapter" data-level="2.2.5" data-path="web-intro.html"><a href="web-intro.html#preliminary-introduction-to-css-and-javascript"><i class="fa fa-check"></i><b>2.2.5</b> Preliminary introduction to CSS and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="web-dependencies.html"><a href="web-dependencies.html"><i class="fa fa-check"></i><b>3</b> Discover Shiny dependencies</a><ul>
<li class="chapter" data-level="3.1" data-path="web-dependencies.html"><a href="web-dependencies.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="web-dependencies.html"><a href="web-dependencies.html#bootstrap-3"><i class="fa fa-check"></i><b>3.2</b> Bootstrap 3</a></li>
<li class="chapter" data-level="3.3" data-path="web-dependencies.html"><a href="web-dependencies.html#jquery-dom-manipulation"><i class="fa fa-check"></i><b>3.3</b> jQuery, DOM manipulation</a></li>
<li class="chapter" data-level="3.4" data-path="web-dependencies.html"><a href="web-dependencies.html#data-formating"><i class="fa fa-check"></i><b>3.4</b> Data formating</a></li>
<li class="chapter" data-level="3.5" data-path="web-dependencies.html"><a href="web-dependencies.html#exercise"><i class="fa fa-check"></i><b>3.5</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>Unleash {htmltools}: from R to HTML</b></span></li>
<li class="chapter" data-level="4" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>4</b> htmltools overview</a><ul>
<li class="chapter" data-level="4.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>4.1</b> HTML Tags</a></li>
<li class="chapter" data-level="4.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>4.2</b> Notations</a></li>
<li class="chapter" data-level="4.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>4.3</b> Adding new tags</a></li>
<li class="chapter" data-level="4.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>4.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="4.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>4.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="4.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>4.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="4.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>4.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="4.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>4.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="4.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>4.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="4.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>4.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="4.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>4.5.6</b> Programmatically create children elements</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercises"><i class="fa fa-check"></i><b>4.6</b> Exercises</a><ul>
<li class="chapter" data-level="4.6.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercise-1-tags-structure-5-minutes"><i class="fa fa-check"></i><b>4.6.1</b> Exercise 1: tags structure (5 minutes)</a></li>
<li class="chapter" data-level="4.6.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercise-2-modifiying-tags-5-minutes"><i class="fa fa-check"></i><b>4.6.2</b> Exercise 2: modifiying tags (5 minutes)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>5</b> Dependency utilities</a><ul>
<li class="chapter" data-level="5.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>5.1</b> The dirty approach</a></li>
<li class="chapter" data-level="5.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>5.2</b> The clean approach</a></li>
<li class="chapter" data-level="5.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>5.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="5.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>5.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>6</b> Other tools</a><ul>
<li class="chapter" data-level="6.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>6.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Deep dive in the Shiny input system</b></span></li>
<li class="chapter" data-level="7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>7</b> JavaScript for Shiny</a><ul>
<li class="chapter" data-level="7.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#shiny-javascript-sources"><i class="fa fa-check"></i><b>7.1</b> Shiny JavaScript sources</a></li>
<li class="chapter" data-level="7.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction-to-javascript"><i class="fa fa-check"></i><b>7.2</b> Introduction to JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#setup"><i class="fa fa-check"></i><b>7.3</b> Setup</a><ul>
<li class="chapter" data-level="7.3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#node"><i class="fa fa-check"></i><b>7.3.1</b> Node</a></li>
<li class="chapter" data-level="7.3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#choose-a-good-ide"><i class="fa fa-check"></i><b>7.3.2</b> Choose a good IDE</a></li>
<li class="chapter" data-level="7.3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#first-script"><i class="fa fa-check"></i><b>7.3.3</b> First Script</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#programming-with-js-basis"><i class="fa fa-check"></i><b>7.4</b> Programming with JS: basis</a><ul>
<li class="chapter" data-level="7.4.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#js-types"><i class="fa fa-check"></i><b>7.4.1</b> JS types</a></li>
<li class="chapter" data-level="7.4.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#variables"><i class="fa fa-check"></i><b>7.4.2</b> Variables</a></li>
<li class="chapter" data-level="7.4.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#conditions"><i class="fa fa-check"></i><b>7.4.3</b> Conditions</a></li>
<li class="chapter" data-level="7.4.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#objects"><i class="fa fa-check"></i><b>7.4.4</b> Objects</a></li>
<li class="chapter" data-level="7.4.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations"><i class="fa fa-check"></i><b>7.4.5</b> Iterations</a></li>
<li class="chapter" data-level="7.4.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#functions"><i class="fa fa-check"></i><b>7.4.6</b> Functions</a></li>
<li class="chapter" data-level="7.4.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#event-listeners"><i class="fa fa-check"></i><b>7.4.7</b> Event listeners</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#jquery"><i class="fa fa-check"></i><b>7.5</b> jQuery</a><ul>
<li class="chapter" data-level="7.5.1" data-path="web-dependencies.html"><a href="web-dependencies.html#introduction"><i class="fa fa-check"></i><b>7.5.1</b> Introduction</a></li>
<li class="chapter" data-level="7.5.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#syntax"><i class="fa fa-check"></i><b>7.5.2</b> Syntax</a></li>
<li class="chapter" data-level="7.5.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#useful-functions"><i class="fa fa-check"></i><b>7.5.3</b> Useful functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#chaining-jquery-methods"><i class="fa fa-check"></i><b>7.5.4</b> Chaining jQuery methods</a></li>
<li class="chapter" data-level="7.5.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations-1"><i class="fa fa-check"></i><b>7.5.5</b> Iterations</a></li>
<li class="chapter" data-level="7.5.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#good-practice"><i class="fa fa-check"></i><b>7.5.6</b> Good practice</a></li>
<li class="chapter" data-level="7.5.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#events"><i class="fa fa-check"></i><b>7.5.7</b> Events</a></li>
<li class="chapter" data-level="7.5.8" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#extending-objects"><i class="fa fa-check"></i><b>7.5.8</b> Extending objects</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#shiny-js-inspector"><i class="fa fa-check"></i><b>7.6</b> Inspect, run and debut JavaScript code from the HTML inspector</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>8</b> Introduction</a><ul>
<li class="chapter" data-level="8.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-websocket"><i class="fa fa-check"></i><b>8.1</b> Websocket: R/JS bidirectional communication</a></li>
<li class="chapter" data-level="8.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-session"><i class="fa fa-check"></i><b>8.2</b> The Shiny session object</a></li>
<li class="chapter" data-level="8.3" data-path="shiny-intro.html"><a href="shiny-intro.html#the-shiny-javascript-object"><i class="fa fa-check"></i><b>8.3</b> The Shiny JavaScript object</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="shiny-input-system.html"><a href="shiny-input-system.html"><i class="fa fa-check"></i><b>9</b> Shiny’s input system</a><ul>
<li class="chapter" data-level="9.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#initialization"><i class="fa fa-check"></i><b>9.1</b> Initialization</a></li>
<li class="chapter" data-level="9.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-bindings"><i class="fa fa-check"></i><b>9.2</b> Input bindings</a><ul>
<li class="chapter" data-level="9.2.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-structure"><i class="fa fa-check"></i><b>9.2.1</b> Input structure</a></li>
<li class="chapter" data-level="9.2.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-shiny-inputs"><i class="fa fa-check"></i><b>9.2.2</b> Binding Shiny inputs</a></li>
<li class="chapter" data-level="9.2.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-other-elements"><i class="fa fa-check"></i><b>9.2.3</b> Binding other elements</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#utilities-to-quickly-define-new-inputs"><i class="fa fa-check"></i><b>9.3</b> Utilities to quickly define new inputs</a><ul>
<li class="chapter" data-level="9.3.1" data-path="web-dependencies.html"><a href="web-dependencies.html#introduction"><i class="fa fa-check"></i><b>9.3.1</b> Introduction</a></li>
<li class="chapter" data-level="9.3.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#examples"><i class="fa fa-check"></i><b>9.3.2</b> Examples</a></li>
<li class="chapter" data-level="9.3.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#custom-data-format"><i class="fa fa-check"></i><b>9.3.3</b> Custom data format</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="shiny-input-system.html"><a href="shiny-input-system.html#miscellaneous"><i class="fa fa-check"></i><b>9.4</b> Miscellaneous</a><ul>
<li class="chapter" data-level="9.4.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#get-access-to-initial-values"><i class="fa fa-check"></i><b>9.4.1</b> Get access to initial values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="shiny-custom-handler.html"><a href="shiny-custom-handler.html"><i class="fa fa-check"></i><b>10</b> Custom handlers: from R to JavaScript</a></li>
<li class="part"><span><b>Practice 1: a dashboard template</b></span></li>
<li class="chapter" data-level="11" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>11</b> Template selection</a></li>
<li class="chapter" data-level="12" data-path="custom-templates-package.html"><a href="custom-templates-package.html"><i class="fa fa-check"></i><b>12</b> Package creation</a><ul>
<li class="chapter" data-level="12.1" data-path="web-dependencies.html"><a href="web-dependencies.html#introduction"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="custom-templates-package.html"><a href="custom-templates-package.html#step-by-step"><i class="fa fa-check"></i><b>12.2</b> Step by step</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>13</b> Define dependencies</a><ul>
<li class="chapter" data-level="13.1" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#discover-the-project"><i class="fa fa-check"></i><b>13.1</b> Discover the project</a></li>
<li class="chapter" data-level="13.2" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#identify-mandatory-dependencies"><i class="fa fa-check"></i><b>13.2</b> Identify mandatory dependencies</a></li>
<li class="chapter" data-level="13.3" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#bundle-dependencies"><i class="fa fa-check"></i><b>13.3</b> Bundle dependencies</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>14</b> Template skeleton</a><ul>
<li class="chapter" data-level="14.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#identify-template-elements"><i class="fa fa-check"></i><b>14.1</b> Identify template elements</a></li>
<li class="chapter" data-level="14.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#design-the-page-layout"><i class="fa fa-check"></i><b>14.2</b> Design the page layout</a><ul>
<li class="chapter" data-level="14.2.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-page-wrapper"><i class="fa fa-check"></i><b>14.2.1</b> The page wrapper</a></li>
<li class="chapter" data-level="14.2.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-body-content"><i class="fa fa-check"></i><b>14.2.2</b> The body content</a></li>
<li class="chapter" data-level="14.2.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-footer"><i class="fa fa-check"></i><b>14.2.3</b> The footer</a></li>
<li class="chapter" data-level="14.2.4" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-navbar-or-header"><i class="fa fa-check"></i><b>14.2.4</b> The navbar (or header)</a></li>
<li class="chapter" data-level="14.2.5" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#card-containers"><i class="fa fa-check"></i><b>14.2.5</b> Card containers</a></li>
<li class="chapter" data-level="14.2.6" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#ribbons-card-components"><i class="fa fa-check"></i><b>14.2.6</b> Ribbons: card components</a></li>
<li class="chapter" data-level="14.2.7" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#icons"><i class="fa fa-check"></i><b>14.2.7</b> Icons</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercises"><i class="fa fa-check"></i><b>14.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>15</b> Testing and validating templates elements</a><ul>
<li class="chapter" data-level="15.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#validate-template-functions"><i class="fa fa-check"></i><b>15.1</b> Validate template functions</a><ul>
<li class="chapter" data-level="15.1.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#create-your-own-validations"><i class="fa fa-check"></i><b>15.1.1</b> Create your own validations</a></li>
<li class="chapter" data-level="15.1.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#existing-utils-functions"><i class="fa fa-check"></i><b>15.1.2</b> Existing utils functions</a></li>
<li class="chapter" data-level="15.1.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#example-refine-navbar-menu-items"><i class="fa fa-check"></i><b>15.1.3</b> Example: refine navbar menu items</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-templates-elements"><i class="fa fa-check"></i><b>15.2</b> Testing templates elements</a><ul>
<li class="chapter" data-level="15.2.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-template-behavior"><i class="fa fa-check"></i><b>15.2.1</b> Testing template behavior</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-javascript"><i class="fa fa-check"></i><b>15.3</b> Testing JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>16</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="16.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#tabler-action-button"><i class="fa fa-check"></i><b>16.1</b> Tabler action button</a><ul>
<li class="chapter" data-level="16.1.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#reminders-about-the-action-button"><i class="fa fa-check"></i><b>16.1.1</b> Reminders about the action button</a></li>
<li class="chapter" data-level="16.1.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#application-to-tabler"><i class="fa fa-check"></i><b>16.1.2</b> Application to Tabler</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#toggle-switch"><i class="fa fa-check"></i><b>16.2</b> Toggle Switch</a></li>
<li class="chapter" data-level="16.3" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#navbar-menu-input"><i class="fa fa-check"></i><b>16.3</b> Navbar menu input</a></li>
<li class="chapter" data-level="16.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercises"><i class="fa fa-check"></i><b>16.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html"><i class="fa fa-check"></i><b>17</b> Adding more interactivity</a><ul>
<li class="chapter" data-level="17.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#custom-progress-bars"><i class="fa fa-check"></i><b>17.1</b> Custom progress bars</a></li>
<li class="chapter" data-level="17.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#user-feedback-toasts"><i class="fa fa-check"></i><b>17.2</b> User feedback: toasts</a><ul>
<li class="chapter" data-level="17.2.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#toast-skeleton"><i class="fa fa-check"></i><b>17.2.1</b> Toast skeleton</a></li>
<li class="chapter" data-level="17.2.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#the-toast-api"><i class="fa fa-check"></i><b>17.2.2</b> The toast API</a></li>
<li class="chapter" data-level="17.2.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#r-implementation"><i class="fa fa-check"></i><b>17.2.3</b> R implementation</a></li>
<li class="chapter" data-level="17.2.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#wrap-up"><i class="fa fa-check"></i><b>17.2.4</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#transform-an-element-in-a-custom-action-button"><i class="fa fa-check"></i><b>17.3</b> Transform an element in a custom action button</a></li>
<li class="chapter" data-level="17.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#tab-events"><i class="fa fa-check"></i><b>17.4</b> Tab events</a><ul>
<li class="chapter" data-level="17.4.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#insert-tabs"><i class="fa fa-check"></i><b>17.4.1</b> Insert/Remove tabs in tabsetpanel</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#exercises"><i class="fa fa-check"></i><b>17.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Beautify with CSS and SASS</b></span></li>
<li class="chapter" data-level="18" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html"><i class="fa fa-check"></i><b>18</b> Beautify with fresh</a><ul>
<li class="chapter" data-level="18.1" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html#fresh-the-big-picture"><i class="fa fa-check"></i><b>18.1</b> {fresh}, the big picture</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="survival-kit-javascript" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> JavaScript for Shiny</h1>
<p>To understand how Shiny works from inside, especially understand how inputs are handled, we’ll need to dive into its core which contains a substantial amount of JavaScript (JS) files.</p>
<div id="shiny-javascript-sources" class="section level2">
<h2><span class="header-section-number">7.1</span> Shiny JavaScript sources</h2>
<p>Let’s have a look at the Shiny github <a href="https://github.com/rstudio/shiny">project</a>. As a R package, it is composed of folders like <code>R</code>, <code>man</code>, <code>tests</code> and other elements. The <code>inst</code> folder contains resources for external dependencies like Bootstrap 3, jQuery, datatables, fontawesome, … mentioned in Chapter <a href="web-dependencies.html#web-dependencies">3</a> sorted in the <code>www/shared</code> sub-folder as well as the whole CSS and JS Shiny codes. Notice the presence of minified files like <code>shiny.min.js</code> and non minified elements such as <code>shiny.css</code>. Overall, the minification process reduces the loading time of a web page by removing comments, extra spaces, thereby decreasing the file size. For instance <code>shiny.js</code> has 6628 lines of code, while <code>shiny.min.js</code> has only 4.</p>
<p>Notice the <code>srcjs/</code> folder shown in Figure <a href="survival-kit-javascript.html#fig:shiny-js-sources">7.1</a>. It actually contains all pieces to reconstruct the whole <code>shiny.js</code> file.</p>
<div class="figure"><span id="fig:shiny-js-sources"></span>
<img src="images/survival-kit/shiny-js-sources.png" alt="Shiny JavaScript sources" width="1155" />
<p class="caption">
FIGURE 7.1: Shiny JavaScript sources
</p>
</div>
<p>The <code>_start.js</code> and <code>_end.js</code> are used by the <code>Gruntfile.js</code>, that is a <a href="https://gruntjs.com">grunt-based</a> tool to run different tasks such as concatenate multiple JavaScript files, lint the code, minify it … See <a href="https://github.com/rstudio/shiny/tree/master/tools">here</a> for a summary.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb93-1"><a href="survival-kit-javascript.html#cb93-1"></a><span class="va">grunt</span>.<span class="at">registerTask</span>(<span class="st">&#39;default&#39;</span><span class="op">,</span> [</span>
<span id="cb93-2"><a href="survival-kit-javascript.html#cb93-2"></a>  <span class="st">&#39;concat&#39;</span><span class="op">,</span></span>
<span id="cb93-3"><a href="survival-kit-javascript.html#cb93-3"></a>  <span class="st">&#39;string-replace&#39;</span><span class="op">,</span></span>
<span id="cb93-4"><a href="survival-kit-javascript.html#cb93-4"></a>  <span class="st">&#39;validateStringReplace&#39;</span><span class="op">,</span></span>
<span id="cb93-5"><a href="survival-kit-javascript.html#cb93-5"></a>  <span class="st">&#39;eslint&#39;</span><span class="op">,</span></span>
<span id="cb93-6"><a href="survival-kit-javascript.html#cb93-6"></a>  <span class="st">&#39;configureBabel&#39;</span><span class="op">,</span></span>
<span id="cb93-7"><a href="survival-kit-javascript.html#cb93-7"></a>  <span class="st">&#39;babel&#39;</span><span class="op">,</span></span>
<span id="cb93-8"><a href="survival-kit-javascript.html#cb93-8"></a>  <span class="st">&#39;uglify&#39;</span></span>
<span id="cb93-9"><a href="survival-kit-javascript.html#cb93-9"></a>])<span class="op">;</span></span></code></pre></div>
<p>Since in Chapter (shiny-input-system) we’ll use some of those script, a little understanding of the basic underlying JavaScript concepts is necessary.</p>
</div>
<div id="introduction-to-javascript" class="section level2">
<h2><span class="header-section-number">7.2</span> Introduction to JavaScript</h2>
<p>JavaScript was created in 1995 by Brendan Eich and is also known as ECMAScript (ES). Interestingly, you might have heard about ActionScript, which is no more than an implementation of ES by Adobe Systems. Nowadays, JavaScript is the centerpiece of web development across all websites.</p>
<p>Here is a quick example. If you have a personal blog, you probably know Hugo or Jekyll. These tools allow one to rapidly develop a professional looking (or at least not too ugly) blog in just a few minutes. This allows bloggers to focus on the content, which is really the point! Now, if you open the HTML inspector introduced in Chapter <a href="web-intro.html#web-intro-html">2.2</a>, click on the elements tab, which may open by default, and uncollapse the <code>&lt;head&gt;</code> tag, you see that a lot of scripts are included, as shown in Figure <a href="survival-kit-javascript.html#fig:scripts-list">7.2</a>. Similarly for the <code>&lt;body&gt;</code> tag.</p>
<div class="figure"><span id="fig:scripts-list"></span>
<img src="images/survival-kit/scripts-list.png" alt="A website is full of JavaScript" width="1255" />
<p class="caption">
FIGURE 7.2: A website is full of JavaScript
</p>
</div>
<p>There are 2 ways to include scripts:</p>
<ul>
<li>Use the <code>&lt;script&gt;</code> tag with the JS code inside</li>
<li>Add the <code>onclick</code> attribute to a button to trigger JS as soon as it is clicked (This is similar to event listeners, see below)</li>
<li>Import an external file containing the JS code and only</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb94-1"><a href="survival-kit-javascript.html#cb94-1"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></span>
<span id="cb94-2"><a href="survival-kit-javascript.html#cb94-2"></a><span class="co">// JS code here</span></span>
<span id="cb94-3"><a href="survival-kit-javascript.html#cb94-3"></a><span class="kw">&lt;/script&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb95"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb95-1"><a href="survival-kit-javascript.html#cb95-1"></a><span class="co">&lt;!-- We use the src attribute to link the external file --&gt;</span></span>
<span id="cb95-2"><a href="survival-kit-javascript.html#cb95-2"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;file.js&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
<p>Whether to choose the first, second or third method depends on the content of your script. If we consider the JS library jQuery, it unfortunately contains so much code making it a challenge to understand. This often makes users avoid the first method.</p>
</div>
<div id="setup" class="section level2">
<h2><span class="header-section-number">7.3</span> Setup</h2>
<p>Like R or Python, JavaScript (JS) is an interpreted language, executed client-side, in other words in the browser. This also means that JS code may not be run without a suitable tool.</p>
<div id="node" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Node</h3>
<p><a href="https://nodejs.org/en/">Node</a> contains an interpreter for JS as well as a dependencies manager, npm (Node Package Manager). To install Node on your computer, browse to the website and follow the installation instructions. Afterwards, open a terminal and check if</p>
<pre><code>$ which node
$ node --version</code></pre>
<p>returns something. If not, Node may not be properly installed.</p>
</div>
<div id="choose-a-good-ide" class="section level3">
<h3><span class="header-section-number">7.3.2</span> Choose a good IDE</h3>
<p>Personally, I really like <a href="https://code.visualstudio.com">VSCode</a> for coding with JS, as it contains a Node interpreter allowing you to seamlessly execute any JS code. As a side note, I encourage you to try the dracula color theme, which is my favorite! Many also chose the <a href="https://rstudio.com/products/rstudio/">Rstudio IDE</a>, provided that you have Node installed. Below, we will see how to run a JS code in both IDE’s. In section <a href="survival-kit-javascript.html#shiny-js-inspector">7.6</a>, we will show how to manipulate JS code directly in the web browser, through the HTML inspector. This is the method we will mostly use in the remaining of the book since we will also work with HTML and CSS at the same time.</p>
</div>
<div id="first-script" class="section level3">
<h3><span class="header-section-number">7.3.3</span> First Script</h3>
<p>Let’s write our first script:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb97-1"><a href="survival-kit-javascript.html#cb97-1"></a><span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;Hello World&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>You notice that all instruction end by <code>;</code>. You can run this script either in Rstudio IDE or VSCode.</p>
<div class="figure"><span id="fig:script-vscode"></span>
<img src="images/survival-kit/script-vscode.png" alt="Run JS in VSCode" width="1066" />
<p class="caption">
FIGURE 7.3: Run JS in VSCode
</p>
</div>
<p>In VSCode, clicking on the run arrow (top center) of Figure <a href="survival-kit-javascript.html#fig:script-vscode">7.3</a>, triggers the <code>node hello.js</code> command, which tells Node to run the script. We see the result in the right panel (code=0 means the execution is fine and we even have the compute time). To run this script in the RStudio IDE, one needs to click on the terminal tab (you could also open a basic terminal) and type <code>node hello.js</code> (or <code>node mycustompath/hello.js</code> if you are not in the folder containing the script). You should see the Hello World message in the console (see Figure <a href="survival-kit-javascript.html#fig:script-rstudio">7.4</a>).</p>
<div class="figure"><span id="fig:script-rstudio"></span>
<img src="images/survival-kit/script-rstudio.png" alt="Run JS in a terminal" width="963" />
<p class="caption">
FIGURE 7.4: Run JS in a terminal
</p>
</div>
</div>
</div>
<div id="programming-with-js-basis" class="section level2">
<h2><span class="header-section-number">7.4</span> Programming with JS: basis</h2>
<p>We are now all set to introduce the basis of JS. As many languages, JS is made of variables and instructions. All instructions end by the <code>;</code> symbol.</p>
<div id="js-types" class="section level3">
<h3><span class="header-section-number">7.4.1</span> JS types</h3>
<p>JS defines several types:</p>
<ul>
<li>Number: does not distinguish between integers and others (in R for instance, numeric contains integers and double)</li>
<li>String: characters (‘blabla’)</li>
<li>Boolean: true/false</li>
</ul>
<p>To check the type of an element, we may use the <code>typeof</code> operator.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb98-1"><a href="survival-kit-javascript.html#cb98-1"></a><span class="kw">typeof</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// number</span></span>
<span id="cb98-2"><a href="survival-kit-javascript.html#cb98-2"></a><span class="kw">typeof</span> <span class="st">&#39;pouic&#39;</span><span class="op">;</span> <span class="co">// string</span></span></code></pre></div>
<br>
<div class="callout callout-danger">
<p>In JS, <code>typeof</code> is not a function like in R!!! Therefore don’t write <code>typeof('string');</code>.</p>
</div>
<p><br></p>
</div>
<div id="variables" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Variables</h3>
<p>Variables are key elements in programmation. They allow to store intermediate results and do other manipulations. In JS, a variable is defined by:</p>
<ul>
<li>a type</li>
<li>a name</li>
<li>a value</li>
</ul>
<br>
<div class="callout callout-danger">
Valid variable names:
<ul>
<li>
don’t use an existing name like typeof
</li>
<li>
don’t start with a number (123soleil)
</li>
<li>
don’t include any space (total price)
</li>
</ul>
</div>
<p><br></p>
<p>Besides, code style is a critical element in programming, increasing readability, and general consistence. There are several styles, the main ones being <code>snake_case</code> and <code>camelCase</code>. I personally use the camelCase syntax to write variables in JS. To set a variable we use <code>let</code> (there exists <code>var</code> but this is not the latest JS norm (ESMAScript 6 or ES6). You will see later that we still use <code>var</code> in the shiny core and many other R packages).</p>
<p>There are two ways to create variables in JavaScript.</p>
<div id="const" class="section level4">
<h4><span class="header-section-number">7.4.2.1</span> Const</h4>
<p>In JavaScript, a variable may be created with <code>const</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb99-1"><a href="survival-kit-javascript.html#cb99-1"></a><span class="kw">const</span> n <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb99-2"><a href="survival-kit-javascript.html#cb99-2"></a>n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb99-3"><a href="survival-kit-javascript.html#cb99-3"></a><span class="kw">const</span> n <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb99-4"><a href="survival-kit-javascript.html#cb99-4"></a><span class="kw">const</span> a<span class="op">;</span></span>
<span id="cb99-5"><a href="survival-kit-javascript.html#cb99-5"></a>a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// errors</span></span></code></pre></div>
<p>As shown above, such variables:</p>
<ul>
<li>Cannot be modified</li>
<li>Cannot share the same name</li>
<li>Must be assigned a value</li>
</ul>
</div>
<div id="let" class="section level4">
<h4><span class="header-section-number">7.4.2.2</span> let</h4>
<p>Another way to define a variable:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb100-1"><a href="survival-kit-javascript.html#cb100-1"></a><span class="kw">let</span> myVariable <span class="op">=</span> <span class="st">&#39;welcome&#39;</span><span class="op">;</span></span>
<span id="cb100-2"><a href="survival-kit-javascript.html#cb100-2"></a>myVariable <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb100-3"><a href="survival-kit-javascript.html#cb100-3"></a><span class="va">console</span>.<span class="at">log</span>(myVariable)<span class="op">;</span></span></code></pre></div>
<p>Then we may use all mathematical operators to manipulate our variables.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb101-1"><a href="survival-kit-javascript.html#cb101-1"></a><span class="kw">let</span> myNumber <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// affectation</span></span>
<span id="cb101-2"><a href="survival-kit-javascript.html#cb101-2"></a>myNumber<span class="op">--;</span> <span class="co">// decrement</span></span>
<span id="cb101-3"><a href="survival-kit-javascript.html#cb101-3"></a><span class="va">console</span>.<span class="at">log</span>(myNumber)<span class="op">;</span> <span class="co">// print 0</span></span></code></pre></div>
<br>
<div class="callout callout-info">
List of numerical operators in JS:
<ul>
<li>
+
</li>
<li>
-
</li>
<li>
*
</li>
<li>
/
</li>
<li>
% (modulo)
</li>
<li>
++ (incrementation)
</li>
<li>
– (decrementation)
</li>
</ul>
</div>
<p><br></p>
<p>To concatenate two strings, we use the<code>+</code> symbol.</p>
<p>You may also know <code>var</code> to declare variables. What is the difference with <code>let</code>? It is mainly a scope <a href="https://www.w3schools.com/js/js_let.asp">reason</a>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb102-1"><a href="survival-kit-javascript.html#cb102-1"></a><span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb102-2"><a href="survival-kit-javascript.html#cb102-2"></a><span class="op">{</span></span>
<span id="cb102-3"><a href="survival-kit-javascript.html#cb102-3"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// this will modify i globally, not locally</span></span>
<span id="cb102-4"><a href="survival-kit-javascript.html#cb102-4"></a><span class="op">}</span></span>
<span id="cb102-5"><a href="survival-kit-javascript.html#cb102-5"></a><span class="va">console</span>.<span class="at">log</span>(<span class="vs">`i is </span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span> <span class="co">// i is 2.</span></span>
<span id="cb102-6"><a href="survival-kit-javascript.html#cb102-6"></a></span>
<span id="cb102-7"><a href="survival-kit-javascript.html#cb102-7"></a><span class="kw">let</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb102-8"><a href="survival-kit-javascript.html#cb102-8"></a><span class="op">{</span></span>
<span id="cb102-9"><a href="survival-kit-javascript.html#cb102-9"></a>  <span class="kw">let</span> j <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// j is only declared locally and not globally!</span></span>
<span id="cb102-10"><a href="survival-kit-javascript.html#cb102-10"></a><span class="op">}</span></span>
<span id="cb102-11"><a href="survival-kit-javascript.html#cb102-11"></a><span class="va">console</span>.<span class="at">log</span>(<span class="vs">`j is </span><span class="sc">${</span>j<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span> <span class="co">// j is 1</span></span></code></pre></div>
</div>
</div>
<div id="conditions" class="section level3">
<h3><span class="header-section-number">7.4.3</span> Conditions</h3>
<p>Below are the operators to check conditions.</p>
<br>
<div class="callout callout-info">
<ul>
<li>
== (A equal B)
</li>
<li>
!= (A not equal to B)
</li>
<li>
&gt; (&gt;=)
</li>
<li>
&lt; (&lt;=)
</li>
<li>
AND (A AND B)
</li>
<li>
OR (A OR B)
</li>
</ul>
</div>
<p><br></p>
<p>To test conditions there exists several ways:</p>
<ul>
<li><code>if (condition) { console.log('Test passed'); }</code></li>
<li><code>if (condition) { instruction A} else { instruction B }</code></li>
</ul>
<p>This is very common to other languages (and R for instance). Whenever a lot of possible conditions need to be evaluated, it is better to choose the <code>switch</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb103-1"><a href="survival-kit-javascript.html#cb103-1"></a><span class="cf">switch</span> (variable) <span class="op">{</span></span>
<span id="cb103-2"><a href="survival-kit-javascript.html#cb103-2"></a>  <span class="cf">case</span> <span class="dt">val1</span><span class="op">:</span> <span class="co">// instruction 1</span></span>
<span id="cb103-3"><a href="survival-kit-javascript.html#cb103-3"></a>  <span class="cf">break</span><span class="op">;</span> <span class="co">// don&#39;t forget the break!</span></span>
<span id="cb103-4"><a href="survival-kit-javascript.html#cb103-4"></a>  <span class="cf">case</span> <span class="dt">val2</span><span class="op">:</span>  <span class="co">// instruction 2</span></span>
<span id="cb103-5"><a href="survival-kit-javascript.html#cb103-5"></a>  <span class="cf">break</span><span class="op">;</span></span>
<span id="cb103-6"><a href="survival-kit-javascript.html#cb103-6"></a>  <span class="cf">default</span><span class="op">:</span> <span class="co">// when none of val1 and val2 are satisfied</span></span>
<span id="cb103-7"><a href="survival-kit-javascript.html#cb103-7"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="objects" class="section level3">
<h3><span class="header-section-number">7.4.4</span> Objects</h3>
<p>JavaScript is an object oriented programming language (like Python). An object is defined by:</p>
<ul>
<li>a type</li>
<li>some properties</li>
<li>some methods (to manipulate properties)</li>
</ul>
<p>Let’s define our first object below:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb104-1"><a href="survival-kit-javascript.html#cb104-1"></a><span class="kw">const</span> me <span class="op">=</span> <span class="op">{</span></span>
<span id="cb104-2"><a href="survival-kit-javascript.html#cb104-2"></a>  <span class="dt">name </span><span class="op">:</span> <span class="st">&#39;Divad&#39;</span><span class="op">,</span></span>
<span id="cb104-3"><a href="survival-kit-javascript.html#cb104-3"></a>  <span class="dt">age </span><span class="op">:</span> <span class="dv">29</span><span class="op">,</span></span>
<span id="cb104-4"><a href="survival-kit-javascript.html#cb104-4"></a>  <span class="dt">music </span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></span>
<span id="cb104-5"><a href="survival-kit-javascript.html#cb104-5"></a>  <span class="dt">printName</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb104-6"><a href="survival-kit-javascript.html#cb104-6"></a>    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`I am </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb104-7"><a href="survival-kit-javascript.html#cb104-7"></a>  <span class="op">}</span></span>
<span id="cb104-8"><a href="survival-kit-javascript.html#cb104-8"></a><span class="op">}</span></span>
<span id="cb104-9"><a href="survival-kit-javascript.html#cb104-9"></a></span>
<span id="cb104-10"><a href="survival-kit-javascript.html#cb104-10"></a><span class="va">me</span>.<span class="at">geek</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span> <span class="co">// works (see const variables above)</span></span>
<span id="cb104-11"><a href="survival-kit-javascript.html#cb104-11"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">JSON</span>.<span class="at">stringify</span>(me))<span class="op">;</span> <span class="co">// print a human readable object.</span></span>
<span id="cb104-12"><a href="survival-kit-javascript.html#cb104-12"></a>  </span>
<span id="cb104-13"><a href="survival-kit-javascript.html#cb104-13"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">name</span>)<span class="op">;</span></span>
<span id="cb104-14"><a href="survival-kit-javascript.html#cb104-14"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">age</span>)<span class="op">;</span></span>
<span id="cb104-15"><a href="survival-kit-javascript.html#cb104-15"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">music</span>)<span class="op">;</span></span>
<span id="cb104-16"><a href="survival-kit-javascript.html#cb104-16"></a><span class="co">// don&#39;t repeat yourself!!!</span></span>
<span id="cb104-17"><a href="survival-kit-javascript.html#cb104-17"></a><span class="cf">for</span> (<span class="kw">let</span> key <span class="kw">in</span> me) <span class="op">{</span> <span class="co">// here is it ok to use `in`</span></span>
<span id="cb104-18"><a href="survival-kit-javascript.html#cb104-18"></a> <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`me[</span><span class="sc">${</span>key<span class="sc">}</span><span class="vs">] is </span><span class="sc">${</span>me[key]<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb104-19"><a href="survival-kit-javascript.html#cb104-19"></a><span class="op">}</span></span>
<span id="cb104-20"><a href="survival-kit-javascript.html#cb104-20"></a></span>
<span id="cb104-21"><a href="survival-kit-javascript.html#cb104-21"></a><span class="va">me</span>.<span class="at">printName</span>()<span class="op">;</span></span>
<span id="cb104-22"><a href="survival-kit-javascript.html#cb104-22"></a></span>
<span id="cb104-23"><a href="survival-kit-javascript.html#cb104-23"></a>me <span class="op">=</span> <span class="op">{</span></span>
<span id="cb104-24"><a href="survival-kit-javascript.html#cb104-24"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Paul&#39;</span><span class="op">,</span></span>
<span id="cb104-25"><a href="survival-kit-javascript.html#cb104-25"></a>  <span class="dt">age</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb104-26"><a href="survival-kit-javascript.html#cb104-26"></a><span class="op">}</span> <span class="co">// error (see const variables above)</span></span></code></pre></div>
<p>Some comments on the above code:</p>
<ul>
<li>to access an object propertie, we use <code>object.propertie</code></li>
<li>to print a human readable version of the object <code>JSON.stringify</code> will do the job</li>
<li>we introduced string interpolation with <code>${*}</code>. <code>*</code> may be any valid expression.</li>
<li>methods are accessed like properties (we may also pass parameters). We use <code>this</code> to refer to the object itself. Take note, we will see it a lot!</li>
</ul>
<p>In JavaScript, we can find already predefined objects to interact with arrays, dates.</p>
<div id="arrays" class="section level4">
<h4><span class="header-section-number">7.4.4.1</span> Arrays</h4>
<p>An array is a structure allowing to store informations for instance</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb105-1"><a href="survival-kit-javascript.html#cb105-1"></a><span class="kw">const</span> table <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb105-2"><a href="survival-kit-javascript.html#cb105-2"></a><span class="va">table</span>.<span class="at">push</span>(<span class="st">&#39;hello&#39;</span>)<span class="op">;</span></span>
<span id="cb105-3"><a href="survival-kit-javascript.html#cb105-3"></a>table <span class="op">=</span> [<span class="dv">2</span>]<span class="op">;</span> <span class="co">// error (as explain in above in the variable part)</span></span>
<span id="cb105-4"><a href="survival-kit-javascript.html#cb105-4"></a><span class="va">console</span>.<span class="at">log</span>(table)<span class="op">;</span></span></code></pre></div>
<p>Array may be nested</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb106-1"><a href="survival-kit-javascript.html#cb106-1"></a><span class="kw">const</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb106-2"><a href="survival-kit-javascript.html#cb106-2"></a><span class="va">console</span>.<span class="at">log</span>(nested)<span class="op">;</span></span></code></pre></div>
<p>In arrays, elements may be accessed by their index, but as mentionned before, the first index is 0 (not 1 like in R). A convenient way to print all arrays’s elements is to use an iteration:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb107-1"><a href="survival-kit-javascript.html#cb107-1"></a><span class="kw">const</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb107-2"><a href="survival-kit-javascript.html#cb107-2"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="kw">of</span> nested) <span class="op">{</span></span>
<span id="cb107-3"><a href="survival-kit-javascript.html#cb107-3"></a>  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></span>
<span id="cb107-4"><a href="survival-kit-javascript.html#cb107-4"></a><span class="op">}</span></span>
<span id="cb107-5"><a href="survival-kit-javascript.html#cb107-5"></a></span>
<span id="cb107-6"><a href="survival-kit-javascript.html#cb107-6"></a><span class="co">// or with the classic approach</span></span>
<span id="cb107-7"><a href="survival-kit-javascript.html#cb107-7"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">nested</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></span>
<span id="cb107-8"><a href="survival-kit-javascript.html#cb107-8"></a>  <span class="va">console</span>.<span class="at">log</span>(nested[i])<span class="op">;</span></span>
<span id="cb107-9"><a href="survival-kit-javascript.html#cb107-9"></a><span class="op">}</span></span></code></pre></div>
<p>Note that the <code>length</code> method returns the size of an array and is very convenient in for loops. Below is a table referencing the principal methods for arrays (we will use some of them later)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">length</td>
<td align="center">Return the number of elements in an array</td>
</tr>
<tr class="even">
<td align="center">Join(string separator)</td>
<td align="center">Transform an array in a string</td>
</tr>
<tr class="odd">
<td align="center">concat(array1, array2)</td>
<td align="center">Assemble 2 arrays</td>
</tr>
<tr class="even">
<td align="center">pop()</td>
<td align="center">Remove the last element of an array</td>
</tr>
<tr class="odd">
<td align="center">shift()</td>
<td align="center">Remove the first element of an array</td>
</tr>
<tr class="even">
<td align="center">unshift(el1, el2, …)</td>
<td align="center">Insert elements at the beginning of an array</td>
</tr>
<tr class="odd">
<td align="center">push(el1, el2, …)</td>
<td align="center">Add extra elements at the end of an array</td>
</tr>
<tr class="even">
<td align="center">sort()</td>
<td align="center">Sort array elements by increasing value of alphabetical order</td>
</tr>
<tr class="odd">
<td align="center">reverse()</td>
<td align="center">Symetric of sort()</td>
</tr>
</tbody>
</table>
<p>Quite honestly, we mainly use <code>push</code> and <code>length</code> in the next chapters.</p>
</div>
<div id="strings" class="section level4">
<h4><span class="header-section-number">7.4.4.2</span> Strings</h4>
<p>Below are the main methods related to the String object (character in R)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property/Operator</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+ (operator)</td>
<td align="center">String concatenation</td>
</tr>
<tr class="even">
<td align="center">length</td>
<td align="center">String length</td>
</tr>
<tr class="odd">
<td align="center">indexOf()</td>
<td align="center">Gives the position of the character following the input string</td>
</tr>
<tr class="even">
<td align="center">toLowerCase()</td>
<td align="center">Put the string in small letters</td>
</tr>
<tr class="odd">
<td align="center">toUpperCase()</td>
<td align="center">Put the string in capital letters</td>
</tr>
</tbody>
</table>
</div>
<div id="math" class="section level4">
<h4><span class="header-section-number">7.4.4.3</span> Math</h4>
<p>Below we mention some useful methods to handle mathematical objects</p>
<table>
<thead>
<tr class="header">
<th align="center">Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">parseInt()</td>
<td align="center">Convert a string to integer</td>
</tr>
<tr class="even">
<td align="center">parseFloat()</td>
<td align="center">Conversion to floating number</td>
</tr>
</tbody>
</table>
<p>All classic functions like <code>sqrt</code>, trigonometric functions are of course available. We call them with the <code>Math.*</code> prefix.</p>
</div>
</div>
<div id="iterations" class="section level3">
<h3><span class="header-section-number">7.4.5</span> Iterations</h3>
<p>Iterations allow to repeat an instruction or a set of instructions multiple times. Let’s assume we have an array containing 100000 random numbers. How would you do to automatically print them? This a what we are going to see below!</p>
<div id="for-loops" class="section level4">
<h4><span class="header-section-number">7.4.5.1</span> For loops</h4>
<p>The for loop has multiple uses. Below is a classic case where we start by defining the index (variable). We then set an upper bound (the array length) and we finish by incrementing the index value. The code between curly braces is then executed.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb108-1"><a href="survival-kit-javascript.html#cb108-1"></a><span class="kw">const</span> table <span class="op">=</span> [...<span class="at">Array</span>(<span class="dv">100</span>).<span class="at">keys</span>()]<span class="op">;</span> <span class="co">// create an empty array of length 100 (so from 0 to 99, not from 1 to 100 like in R!!!)</span></span>
<span id="cb108-2"><a href="survival-kit-javascript.html#cb108-2"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">table</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></span>
<span id="cb108-3"><a href="survival-kit-javascript.html#cb108-3"></a>    <span class="va">console</span>.<span class="at">log</span>(table[i])<span class="op">;</span> </span>
<span id="cb108-4"><a href="survival-kit-javascript.html#cb108-4"></a><span class="op">}</span></span></code></pre></div>
<p>The way we created the array is a bit special and deserves some explanations:</p>
<ul>
<li><code>Array</code> is a method to define a new array. We call it this way <code>Array(arrayLength)</code> since we don’t want to write 100 values 1 by 1. But if you try <code>console.log(Array(10));</code> you will get <code>[ &lt;10 empty items&gt; ]</code>, meaning that 10 slots are available but nothing is inside yet.</li>
<li><code>keys</code> defines keys for each table index. As a reminder, since <code>Array(10)</code> is an object (check with <code>console.log(typeof Array(10));</code>) we may use <code>Array(10).keys()</code>. This creates an Array Iterator</li>
<li><code>...</code> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">spread syntax</a>, and is called with an iterable object (see above)</li>
</ul>
<br>
<div class="callout callout-danger">
<p>NOTE: Contrary to R, JavaScript index starts from 0 (not from 1)! This is good to keep in mind when we will mix both R and JS.</p>
</div>
<p><br></p>
<p>Let’s have a look at the <code>forEach</code> method for arrays (introduced in ES5):</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb109-1"><a href="survival-kit-javascript.html#cb109-1"></a><span class="kw">const</span> letters <span class="op">=</span> [<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span>]<span class="op">;</span></span>
<span id="cb109-2"><a href="survival-kit-javascript.html#cb109-2"></a><span class="va">letters</span>.<span class="at">forEach</span>((letter) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb109-3"><a href="survival-kit-javascript.html#cb109-3"></a>  <span class="va">console</span>.<span class="at">log</span>(letter)<span class="op">;</span></span>
<span id="cb109-4"><a href="survival-kit-javascript.html#cb109-4"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Below is another way to create a for loop (introduced in ES6):</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb110-1"><a href="survival-kit-javascript.html#cb110-1"></a><span class="kw">const</span> samples <span class="op">=</span> [<span class="st">&#39;blabla&#39;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">;</span> <span class="co">// this is an array!</span></span>
<span id="cb110-2"><a href="survival-kit-javascript.html#cb110-2"></a><span class="cf">for</span> (<span class="kw">let</span> sample <span class="kw">of</span> samples) <span class="op">{</span></span>
<span id="cb110-3"><a href="survival-kit-javascript.html#cb110-3"></a> <span class="va">console</span>.<span class="at">log</span>(sample)<span class="op">;</span></span>
<span id="cb110-4"><a href="survival-kit-javascript.html#cb110-4"></a><span class="op">}</span></span></code></pre></div>
<p>What loop <code>for</code> loop should we use? The answer is: it depends on the situation! Actually, there even exists other ways (replace <code>of</code> by <code>in</code> and you get the indexes of the array, like with the first code, but this is really <a href="https://hacks.mozilla.org/2015/04/es6-in-depth-iterators-and-the-for-of-loop/">not recommended</a>).</p>
</div>
<div id="other-iterations-while" class="section level4">
<h4><span class="header-section-number">7.4.5.2</span> Other iterations: while</h4>
<p>While loops are another way to iterate, as long as the condition defined is TRUE. The incrementation step is done at the end of the instruction.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb111-1"><a href="survival-kit-javascript.html#cb111-1"></a><span class="kw">const</span> h <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb111-2"><a href="survival-kit-javascript.html#cb111-2"></a><span class="cf">while</span> (i <span class="op">&lt;=</span> h) <span class="op">{</span></span>
<span id="cb111-3"><a href="survival-kit-javascript.html#cb111-3"></a>  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></span>
<span id="cb111-4"><a href="survival-kit-javascript.html#cb111-4"></a>  i<span class="op">++;</span> <span class="co">// we need to increment to avoid infinite loop</span></span>
<span id="cb111-5"><a href="survival-kit-javascript.html#cb111-5"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">7.4.6</span> Functions</h3>
<p>Functions are useful to wrap a succession of instructions to accomplish a given task. Defining functions allows programmers to save time (less copy and paste, less search and replace), make less errors and easily share code. In modern JavaScript (ES6), functions are defined as follows:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb112-1"><a href="survival-kit-javascript.html#cb112-1"></a><span class="kw">const</span> a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-2"><a href="survival-kit-javascript.html#cb112-2"></a><span class="kw">const</span> fun <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb112-3"><a href="survival-kit-javascript.html#cb112-3"></a>  <span class="va">console</span>.<span class="at">log</span>(a)<span class="op">;</span></span>
<span id="cb112-4"><a href="survival-kit-javascript.html#cb112-4"></a>  <span class="kw">let</span> p <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb112-5"><a href="survival-kit-javascript.html#cb112-5"></a>  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></span>
<span id="cb112-6"><a href="survival-kit-javascript.html#cb112-6"></a><span class="op">}</span></span>
<span id="cb112-7"><a href="survival-kit-javascript.html#cb112-7"></a><span class="kw">let</span> res <span class="op">=</span> <span class="at">fun</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb112-8"><a href="survival-kit-javascript.html#cb112-8"></a><span class="va">console</span>.<span class="at">log</span>(res)<span class="op">;</span> <span class="co">// prints a and 2. a global</span></span>
<span id="cb112-9"><a href="survival-kit-javascript.html#cb112-9"></a><span class="va">console</span>.<span class="at">log</span>(p)<span class="op">;</span> <span class="co">// fails because p was defined inside the function</span></span></code></pre></div>
<p>This above functions computes the maximum of 2 provided numbers. Some comments about scoping rules: variables defined inside the function are available for the function, but are not available outside the function definition. It should be noted that functions may use global variables defined outside of it.</p>
<div id="export-functions-about-modules" class="section level4">
<h4><span class="header-section-number">7.4.6.1</span> Export functions: about modules</h4>
<p>What happens if you wrote 100 functions that you want to reuse in different scripts? To prevent copying and pasting, we will now introduce the concept of modules. Let’s save the below function in a script <code>utils.js</code>:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb113-1"><a href="survival-kit-javascript.html#cb113-1"></a><span class="kw">const</span> findMax <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb113-2"><a href="survival-kit-javascript.html#cb113-2"></a>  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></span>
<span id="cb113-3"><a href="survival-kit-javascript.html#cb113-3"></a><span class="op">}</span></span>
<span id="cb113-4"><a href="survival-kit-javascript.html#cb113-4"></a></span>
<span id="cb113-5"><a href="survival-kit-javascript.html#cb113-5"></a><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb113-6"><a href="survival-kit-javascript.html#cb113-6"></a>  findMax <span class="op">=</span> findMax</span>
<span id="cb113-7"><a href="survival-kit-javascript.html#cb113-7"></a><span class="op">}</span></span></code></pre></div>
<p>Let’s create a <code>test.js</code> script in the same folder that uses the <code>findMax</code> function. To do this, we need to import the corresponding module:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb114-1"><a href="survival-kit-javascript.html#cb114-1"></a><span class="kw">const</span> <span class="op">{</span>findMax<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./utils.js&#39;</span>)<span class="op">;</span></span>
<span id="cb114-2"><a href="survival-kit-javascript.html#cb114-2"></a><span class="at">findMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// prints 2</span></span></code></pre></div>
<p>In the next chapters, we will see that some of the underlying JS code to build custom shiny inputs share the same utils functions. Therefore, introducing modules is necessary.</p>
</div>
</div>
<div id="event-listeners" class="section level3">
<h3><span class="header-section-number">7.4.7</span> Event listeners</h3>
<p>When you explore a web application, clicking on a button usually triggers something like a computation, a modal or an alert. How does this work?
In JavaScript, interactivity plays a critical role. Indeed, you want the web application to react to user inputs like mouse clicks, keyboard events. Below we introduce DOM events.</p>
<p>Let’s consider a basic HTML button.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb115-1"><a href="survival-kit-javascript.html#cb115-1"></a><span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;mybutton&quot;</span><span class="kw">&gt;</span>Go!<span class="kw">&lt;/button&gt;</span></span></code></pre></div>
<p>On the JavaScript side, we first capture the button element using its id selector (<code>getElementById</code>).</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb116-1"><a href="survival-kit-javascript.html#cb116-1"></a><span class="kw">const</span> btn <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;mybutton&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>We then apply the <code>addEventListener</code> method. In short, an event listener is a program that triggers when a given event occurs (we can add multiple event listeners per HTML element). It takes 2 main parameters:</p>
<ul>
<li>the event: click, change, mouseover, …</li>
<li>the function to call</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb117-1"><a href="survival-kit-javascript.html#cb117-1"></a><span class="va">btn</span>.<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb117-2"><a href="survival-kit-javascript.html#cb117-2"></a>  <span class="at">alert</span>(<span class="st">&#39;Thanks!&#39;</span>)<span class="op">;</span></span>
<span id="cb117-3"><a href="survival-kit-javascript.html#cb117-3"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<br>
<div class="callout callout-info">
<p>We could compare the JavaScript events to Shiny observeEvent in which we are listenning to a specific user input.</p>
</div>
<p><br></p>
</div>
</div>
<div id="jquery" class="section level2">
<h2><span class="header-section-number">7.5</span> jQuery</h2>
<div id="introduction" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Introduction</h3>
<p><a href="https://jquery.com">jQuery</a> is a famous JavaScript library providing a user friendly interface to manipulate the DOM and is present in almost all actual websites. It is slightly easier (understand more convenient to use) than vanilla JS, even though web developers tend to avoid it to go back to vanilla JS (Bootstrap 5, the next iteration of Bootstrap will not rely on jQuery anymore). To use jQuery in a webpage, we must include its code either by dowloading the code and putting the minified JS file in our HTML or setting a link to a CDN.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb118-1"><a href="survival-kit-javascript.html#cb118-1"></a><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></span>
<span id="cb118-2"><a href="survival-kit-javascript.html#cb118-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></span>
<span id="cb118-3"><a href="survival-kit-javascript.html#cb118-3"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb118-4"><a href="survival-kit-javascript.html#cb118-4"></a>  <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb118-5"><a href="survival-kit-javascript.html#cb118-5"></a>  <span class="kw">&lt;title&gt;</span>Including jQuery<span class="kw">&lt;/title&gt;</span></span>
<span id="cb118-6"><a href="survival-kit-javascript.html#cb118-6"></a>  <span class="co">&lt;!-- How to include jQuery --&gt;</span></span>
<span id="cb118-7"><a href="survival-kit-javascript.html#cb118-7"></a>  <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://code.jquery.com/jquery-3.5.0.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb118-8"><a href="survival-kit-javascript.html#cb118-8"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb118-9"><a href="survival-kit-javascript.html#cb118-9"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb118-10"><a href="survival-kit-javascript.html#cb118-10"></a> </span>
<span id="cb118-11"><a href="survival-kit-javascript.html#cb118-11"></a><span class="kw">&lt;p&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span>
<span id="cb118-12"><a href="survival-kit-javascript.html#cb118-12"></a></span>
<span id="cb118-13"><a href="survival-kit-javascript.html#cb118-13"></a> </span>
<span id="cb118-14"><a href="survival-kit-javascript.html#cb118-14"></a><span class="kw">&lt;script&gt;</span></span>
<span id="cb118-15"><a href="survival-kit-javascript.html#cb118-15"></a><span class="at">$</span>(<span class="st">&#39;p&#39;</span>).<span class="at">css</span>(<span class="st">&#39;color&#39;</span><span class="op">,</span> <span class="st">&#39;red&#39;</span>)<span class="op">;</span></span>
<span id="cb118-16"><a href="survival-kit-javascript.html#cb118-16"></a><span class="kw">&lt;/script&gt;</span></span>
<span id="cb118-17"><a href="survival-kit-javascript.html#cb118-17"></a> </span>
<span id="cb118-18"><a href="survival-kit-javascript.html#cb118-18"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb118-19"><a href="survival-kit-javascript.html#cb118-19"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
</div>
<div id="syntax" class="section level3">
<h3><span class="header-section-number">7.5.2</span> Syntax</h3>
<p>Below is a minimal jQuery code representing its philosophy (“write less, do more.”):</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb119-1"><a href="survival-kit-javascript.html#cb119-1"></a><span class="at">$</span>(selector).<span class="at">action</span>()<span class="op">;</span></span></code></pre></div>
<p>The selector slot stands for any jQuery selector like class, id, element, [attribute], :input (will select all input elements) and many <a href="https://www.w3schools.com/jquery/jquery_ref_selectors.asp">more</a>. As a reminder, let’s consider the following example:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb120-1"><a href="survival-kit-javascript.html#cb120-1"></a><span class="kw">&lt;p</span><span class="ot"> class=</span><span class="st">&quot;text&quot;</span><span class="kw">&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span></code></pre></div>
<p>To select and interact with this element, we use JavaScript and jQuery:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb121-1"><a href="survival-kit-javascript.html#cb121-1"></a><span class="kw">let</span> inner <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementsByClassName</span>(<span class="st">&#39;text&#39;</span>).<span class="at">innerHTML</span><span class="op">;</span> <span class="co">// vanilla JS</span></span>
<span id="cb121-2"><a href="survival-kit-javascript.html#cb121-2"></a><span class="kw">let</span> inner <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;.text&#39;</span>).<span class="at">html</span>()<span class="op">;</span> <span class="co">// jQuery</span></span></code></pre></div>
<p>This is of course possible to chain selectors</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb122-1"><a href="survival-kit-javascript.html#cb122-1"></a><span class="kw">&lt;ul</span><span class="ot"> class=</span><span class="st">&quot;list&quot;</span><span class="kw">&gt;</span></span>
<span id="cb122-2"><a href="survival-kit-javascript.html#cb122-2"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>1<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-3"><a href="survival-kit-javascript.html#cb122-3"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>2<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-4"><a href="survival-kit-javascript.html#cb122-4"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>3<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-5"><a href="survival-kit-javascript.html#cb122-5"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="ot"> id=</span><span class="st">&quot;precious-item&quot;</span><span class="kw">&gt;</span>4<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-6"><a href="survival-kit-javascript.html#cb122-6"></a><span class="kw">&lt;/ul&gt;</span></span>
<span id="cb122-7"><a href="survival-kit-javascript.html#cb122-7"></a></span>
<span id="cb122-8"><a href="survival-kit-javascript.html#cb122-8"></a><span class="kw">&lt;ul</span><span class="ot"> class=</span><span class="st">&quot;list&quot;</span><span class="ot"> id=</span><span class="st">&quot;list2&quot;</span><span class="kw">&gt;</span></span>
<span id="cb122-9"><a href="survival-kit-javascript.html#cb122-9"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>1<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-10"><a href="survival-kit-javascript.html#cb122-10"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>2<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-11"><a href="survival-kit-javascript.html#cb122-11"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>3<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-12"><a href="survival-kit-javascript.html#cb122-12"></a>  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;item&quot;</span><span class="kw">&gt;</span>4<span class="kw">&lt;/li&gt;</span></span>
<span id="cb122-13"><a href="survival-kit-javascript.html#cb122-13"></a><span class="kw">&lt;/ul&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb123"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb123-1"><a href="survival-kit-javascript.html#cb123-1"></a><span class="kw">let</span> items <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;.list .item&#39;</span>)<span class="op">;</span> <span class="co">// will return an array containing 8 li tags</span></span>
<span id="cb123-2"><a href="survival-kit-javascript.html#cb123-2"></a><span class="kw">let</span> otherItems <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;#list2 .item&#39;</span>)<span class="op">;</span> <span class="co">// will select only li tags from the second ul element</span></span>
<span id="cb123-3"><a href="survival-kit-javascript.html#cb123-3"></a><span class="kw">let</span> lists <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;ul&#39;</span>)<span class="op">;</span> <span class="co">// will return an array with 2 ul elements</span></span>
<span id="cb123-4"><a href="survival-kit-javascript.html#cb123-4"></a><span class="kw">let</span> firstItem <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;#list2:first-child&#39;</span>)<span class="op">;</span> <span class="co">// will return the first li element of the second ul.</span></span></code></pre></div>
<p>jQuery is obviously simpler than pure JavaScript.</p>
</div>
<div id="useful-functions" class="section level3">
<h3><span class="header-section-number">7.5.3</span> Useful functions</h3>
<p>There exist filtering functions dedicated to simplify item <a href="https://api.jquery.com/category/traversing/">selection</a>. We gathered the one mostly used in Shiny below.</p>
<div id="travel-in-the-dom" class="section level4">
<h4><span class="header-section-number">7.5.3.1</span> Travel in the DOM</h4>
<table>
<colgroup>
<col width="44%" />
<col width="55%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">children()</td>
<td align="center">Get the children of each element passed in the selector (important: only travels a single level down the DOM tree)</td>
</tr>
<tr class="even">
<td align="center">first()</td>
<td align="center">Given an list of elements, select the first item</td>
</tr>
<tr class="odd">
<td align="center">last()</td>
<td align="center">Given an list of elements, select the last item</td>
</tr>
<tr class="even">
<td align="center">find()</td>
<td align="center">Look for a descendant of the selected element(s) that could be multiple levels down in the DOM</td>
</tr>
<tr class="odd">
<td align="center">closest()</td>
<td align="center">Returns the first ancestor matching the condition (travels up in the DOM)</td>
</tr>
<tr class="even">
<td align="center">filter()</td>
<td align="center">Fine tune element selection by applying a filter. Only return element for which the condition is true</td>
</tr>
<tr class="odd">
<td align="center">siblings()</td>
<td align="center">Get all siblings of the selected element(s)</td>
</tr>
<tr class="even">
<td align="center">next()</td>
<td align="center">Get the immediately following sibling</td>
</tr>
<tr class="odd">
<td align="center">prev()</td>
<td align="center">Get the immediately preceding sibling</td>
</tr>
<tr class="even">
<td align="center">not()</td>
<td align="center">Given an existing set of selected elements, remove element(s) that match the given condition</td>
</tr>
</tbody>
</table>
</div>
<div id="manipulate-tags" class="section level4">
<h4><span class="header-section-number">7.5.3.2</span> Manipulate tags</h4>
<p>Below is a list of the main jQuery <a href="https://api.jquery.com/category/manipulation/">methods</a> to manipulate tags (adding class, css property…)</p>
<table>
<colgroup>
<col width="44%" />
<col width="55%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">addClass()</td>
<td align="center">Add class or multiple classes to the set of matched elements</td>
</tr>
<tr class="even">
<td align="center">hasClass()</td>
<td align="center">Check if the matched element(s) have a given class</td>
</tr>
<tr class="odd">
<td align="center">removeClass()</td>
<td align="center">Remove class or multiple classes to the set of matched elements</td>
</tr>
<tr class="even">
<td align="center">attr()</td>
<td align="center">Get or set the value of a specific attribute</td>
</tr>
<tr class="odd">
<td align="center">after()</td>
<td align="center">Insert content after</td>
</tr>
<tr class="even">
<td align="center">before ()</td>
<td align="center">Insert content before</td>
</tr>
<tr class="odd">
<td align="center">css()</td>
<td align="center">Get or set a css property</td>
</tr>
<tr class="even">
<td align="center">remove()</td>
<td align="center">Remove element(s) from the DOM</td>
</tr>
<tr class="odd">
<td align="center">val()</td>
<td align="center">Get the current value of the matched element(s)</td>
</tr>
</tbody>
</table>
<p>TO DO: add more methods</p>
</div>
</div>
<div id="chaining-jquery-methods" class="section level3">
<h3><span class="header-section-number">7.5.4</span> Chaining jQuery methods</h3>
<p>A lot of jQuery methods may be chained, that is like pipe operations in R.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb124-1"><a href="survival-kit-javascript.html#cb124-1"></a><span class="kw">&lt;ul&gt;</span></span>
<span id="cb124-2"><a href="survival-kit-javascript.html#cb124-2"></a>  <span class="kw">&lt;li&gt;</span>Item 1<span class="kw">&lt;/li&gt;</span></span>
<span id="cb124-3"><a href="survival-kit-javascript.html#cb124-3"></a>  <span class="kw">&lt;li&gt;</span>Item 2<span class="kw">&lt;/li&gt;</span></span>
<span id="cb124-4"><a href="survival-kit-javascript.html#cb124-4"></a>  <span class="kw">&lt;li&gt;</span>Item 3<span class="kw">&lt;/li&gt;</span></span>
<span id="cb124-5"><a href="survival-kit-javascript.html#cb124-5"></a>  <span class="kw">&lt;li&gt;</span>Item 4<span class="kw">&lt;/li&gt;</span></span>
<span id="cb124-6"><a href="survival-kit-javascript.html#cb124-6"></a>  <span class="kw">&lt;li&gt;</span>Item 5<span class="kw">&lt;/li&gt;</span></span>
<span id="cb124-7"><a href="survival-kit-javascript.html#cb124-7"></a><span class="kw">&lt;/ul&gt;</span></span></code></pre></div>
<p>We end the chain by <code>;</code> and each step is indent by 2 spaces in the right direction.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb125-1"><a href="survival-kit-javascript.html#cb125-1"></a><span class="at">$</span>(<span class="st">&#39;ul&#39;</span>)</span>
<span id="cb125-2"><a href="survival-kit-javascript.html#cb125-2"></a>  .<span class="at">first</span>()</span>
<span id="cb125-3"><a href="survival-kit-javascript.html#cb125-3"></a>  .<span class="at">css</span>(<span class="st">&#39;color&#39;</span><span class="op">,</span> <span class="st">&#39;green&#39;</span>) <span class="co">// add some style with css</span></span>
<span id="cb125-4"><a href="survival-kit-javascript.html#cb125-4"></a>  .<span class="at">attr</span>(<span class="st">&#39;id&#39;</span><span class="op">,</span> <span class="st">&#39;myAwesomeItem&#39;</span>) <span class="co">// add an id attribute</span></span>
<span id="cb125-5"><a href="survival-kit-javascript.html#cb125-5"></a>  .<span class="at">addClass</span>(<span class="st">&#39;amazing-ul&#39;</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="iterations-1" class="section level3">
<h3><span class="header-section-number">7.5.5</span> Iterations</h3>
<p>Like in vanilla JavaScript, it is possible to do iterations in jQuery. Let’s consider the following HTML elements.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb126-1"><a href="survival-kit-javascript.html#cb126-1"></a><span class="kw">&lt;ul&gt;</span></span>
<span id="cb126-2"><a href="survival-kit-javascript.html#cb126-2"></a>  <span class="kw">&lt;li&gt;</span>Item 1<span class="kw">&lt;/li&gt;</span></span>
<span id="cb126-3"><a href="survival-kit-javascript.html#cb126-3"></a>  <span class="kw">&lt;li&gt;</span>Item 2<span class="kw">&lt;/li&gt;</span></span>
<span id="cb126-4"><a href="survival-kit-javascript.html#cb126-4"></a><span class="kw">&lt;/ul&gt;</span></span></code></pre></div>
<p>We apply the <code>each</code> method to change the style of each matched element step by step.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb127-1"><a href="survival-kit-javascript.html#cb127-1"></a><span class="at">$</span>(<span class="st">&#39;li&#39;</span>).<span class="at">each</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb127-2"><a href="survival-kit-javascript.html#cb127-2"></a>  <span class="at">$</span>(<span class="kw">this</span>).<span class="at">css</span>(<span class="st">&#39;visibility&#39;</span><span class="op">,</span> <span class="st">&#39;hidden&#39;</span>)<span class="op">;</span> <span class="co">// will hide all li items</span></span>
<span id="cb127-3"><a href="survival-kit-javascript.html#cb127-3"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Notice that the following code <code>$('li').css('visibility', 'hidden');</code> will do exactly the same! This is explained by the implicit iteration process handled by most of jQuery methods.</p>
<p>The <code>map</code> methods has a different purpose. It creates a new object based on the provided one.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb128-1"><a href="survival-kit-javascript.html#cb128-1"></a><span class="kw">const</span> items <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb128-2"><a href="survival-kit-javascript.html#cb128-2"></a><span class="kw">const</span> threshold <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb128-3"><a href="survival-kit-javascript.html#cb128-3"></a></span>
<span id="cb128-4"><a href="survival-kit-javascript.html#cb128-4"></a><span class="kw">let</span> filteredItems <span class="op">=</span> <span class="va">$</span>.<span class="at">map</span>(items<span class="op">,</span> <span class="kw">function</span>(i) <span class="op">{</span></span>
<span id="cb128-5"><a href="survival-kit-javascript.html#cb128-5"></a>  <span class="co">// removes all items &gt; threshold</span></span>
<span id="cb128-6"><a href="survival-kit-javascript.html#cb128-6"></a>  <span class="cf">if</span> (i <span class="op">&gt;</span> threshold) </span>
<span id="cb128-7"><a href="survival-kit-javascript.html#cb128-7"></a>    <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb128-8"><a href="survival-kit-javascript.html#cb128-8"></a>  <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb128-9"><a href="survival-kit-javascript.html#cb128-9"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="good-practice" class="section level3">
<h3><span class="header-section-number">7.5.6</span> Good practice</h3>
<p>It is recommended to wrap any jQuery code as follows:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb129-1"><a href="survival-kit-javascript.html#cb129-1"></a><span class="at">$</span>(document).<span class="at">ready</span>(<span class="kw">function</span>()<span class="op">{</span></span>
<span id="cb129-2"><a href="survival-kit-javascript.html#cb129-2"></a>  <span class="co">// your code</span></span>
<span id="cb129-3"><a href="survival-kit-javascript.html#cb129-3"></a><span class="op">}</span>)<span class="op">;</span></span>
<span id="cb129-4"><a href="survival-kit-javascript.html#cb129-4"></a></span>
<span id="cb129-5"><a href="survival-kit-javascript.html#cb129-5"></a><span class="co">// or a shortcut</span></span>
<span id="cb129-6"><a href="survival-kit-javascript.html#cb129-6"></a></span>
<span id="cb129-7"><a href="survival-kit-javascript.html#cb129-7"></a><span class="at">$</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb129-8"><a href="survival-kit-javascript.html#cb129-8"></a>  <span class="co">// your code</span></span>
<span id="cb129-9"><a href="survival-kit-javascript.html#cb129-9"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Indeed, do you guess what would happen if you try to modify an element that does not even exist? The code above will make sure that the document is ready before starting any jQuery manipulation.</p>
</div>
<div id="events" class="section level3">
<h3><span class="header-section-number">7.5.7</span> Events</h3>
<p>In jQuery there exists a significant number methods related to events. Below are the most popular:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb130-1"><a href="survival-kit-javascript.html#cb130-1"></a><span class="at">$</span>(element).<span class="at">click</span>()<span class="op">;</span> <span class="co">// click event</span></span>
<span id="cb130-2"><a href="survival-kit-javascript.html#cb130-2"></a><span class="at">$</span>(element).<span class="at">change</span>()<span class="op">;</span> <span class="co">// trigger change on an element</span></span>
<span id="cb130-3"><a href="survival-kit-javascript.html#cb130-3"></a><span class="at">$</span>(element).<span class="at">on</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb130-4"><a href="survival-kit-javascript.html#cb130-4"></a> <span class="co">// whatever</span></span>
<span id="cb130-5"><a href="survival-kit-javascript.html#cb130-5"></a><span class="op">}</span>)<span class="op">;</span> <span class="co">// attach an event handler function. Here we add click for the example</span></span>
<span id="cb130-6"><a href="survival-kit-javascript.html#cb130-6"></a><span class="at">$</span>(element).<span class="at">one</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb130-7"><a href="survival-kit-javascript.html#cb130-7"></a> <span class="co">// whatever</span></span>
<span id="cb130-8"><a href="survival-kit-javascript.html#cb130-8"></a><span class="op">}</span>)<span class="op">;</span> <span class="co">// the difference with on is that one will trigger only once</span></span>
<span id="cb130-9"><a href="survival-kit-javascript.html#cb130-9"></a><span class="at">$</span>(element).<span class="at">resize</span>()<span class="op">;</span> <span class="co">// useful to trigger plot resize in Shiny so that they correctly fit their container</span></span>
<span id="cb130-10"><a href="survival-kit-javascript.html#cb130-10"></a><span class="at">$</span>(element).<span class="at">trigger</span>(<span class="st">&#39;change&#39;</span>) <span class="co">// similar to $(element).change(); You will find it in the Shiny core.</span></span></code></pre></div>
<p>The <code>.on</code> event is frequently used in Shiny since it allows to pass custom events which are not part of the JS prefined events. For instance shinydashboard relies on a specific HTML/JavaScript/CSS template including a homemade API for handling the dashboard events. Don’t worry if this section is not clear at the moment. We will see practical examples in the following chapters.</p>
</div>
<div id="extending-objects" class="section level3">
<h3><span class="header-section-number">7.5.8</span> Extending objects</h3>
<p>A last feature we need to mention about jQuery is the ability to extend objects with additional properties and/or method.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb131-1"><a href="survival-kit-javascript.html#cb131-1"></a><span class="co">// jQuery way</span></span>
<span id="cb131-2"><a href="survival-kit-javascript.html#cb131-2"></a><span class="at">$</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb131-3"><a href="survival-kit-javascript.html#cb131-3"></a>  <span class="kw">let</span> object1 <span class="op">=</span> <span class="op">{</span></span>
<span id="cb131-4"><a href="survival-kit-javascript.html#cb131-4"></a>    <span class="dt">apple</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb131-5"><a href="survival-kit-javascript.html#cb131-5"></a>  <span class="op">};</span></span>
<span id="cb131-6"><a href="survival-kit-javascript.html#cb131-6"></a>  <span class="va">$</span>.<span class="at">extend</span>(object1<span class="op">,</span> <span class="op">{</span></span>
<span id="cb131-7"><a href="survival-kit-javascript.html#cb131-7"></a>    <span class="dt">print</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb131-8"><a href="survival-kit-javascript.html#cb131-8"></a>      <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb131-9"><a href="survival-kit-javascript.html#cb131-9"></a>    <span class="op">}</span></span>
<span id="cb131-10"><a href="survival-kit-javascript.html#cb131-10"></a>  <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb131-11"><a href="survival-kit-javascript.html#cb131-11"></a>  <span class="va">object1</span>.<span class="at">print</span>()<span class="op">;</span></span>
<span id="cb131-12"><a href="survival-kit-javascript.html#cb131-12"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>With vanilla JS we would use <code>Object.defineProperty</code>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb132-1"><a href="survival-kit-javascript.html#cb132-1"></a><span class="co">// pure JavaScript</span></span>
<span id="cb132-2"><a href="survival-kit-javascript.html#cb132-2"></a><span class="va">Object</span>.<span class="at">defineProperty</span>(object1<span class="op">,</span> <span class="st">&#39;print&#39;</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb132-3"><a href="survival-kit-javascript.html#cb132-3"></a>  <span class="dt">value</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb132-4"><a href="survival-kit-javascript.html#cb132-4"></a>    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb132-5"><a href="survival-kit-javascript.html#cb132-5"></a>  <span class="op">},</span></span>
<span id="cb132-6"><a href="survival-kit-javascript.html#cb132-6"></a>  <span class="dt">writable</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb132-7"><a href="survival-kit-javascript.html#cb132-7"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
</div>
</div>
<div id="shiny-js-inspector" class="section level2">
<h2><span class="header-section-number">7.6</span> Inspect, run and debut JavaScript code from the HTML inspector</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="htmltools-other-tools.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/shiny-javascript.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
