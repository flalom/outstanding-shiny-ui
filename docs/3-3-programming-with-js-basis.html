<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3.3 Programming with JS: basis | Outstanding User Interfaces with Shiny" />
<meta property="og:type" content="book" />


<meta property="og:description" content="A book about deeply customizing Shiny app for production." />
<meta name="github-repo" content="DivadNojnarg/outstanding-shiny-ui" />

<meta name="author" content="David Granjon" />

<meta name="date" content="2020-08-31" />


<meta name="description" content="A book about deeply customizing Shiny app for production.">

<title>3.3 Programming with JS: basis | Outstanding User Interfaces with Shiny</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
p.caption {
  color: #777;
  margin-top: 10px;
}
p code {
  white-space: inherit;
}
pre {
  word-break: normal;
  word-wrap: normal;
}
pre code {
  white-space: inherit;
}
p.flushright {
  text-align: right;
}
blockquote > p:last-child {
  text-align: right;
}
blockquote > p:first-child {
  text-align: inherit;
}

/* Callouts */
.callout {
  border-radius: 0.25rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
  background-color: #ffffff;
  border-left: 5px solid #e9ecef;
  margin-bottom: 1rem;
  padding: 1rem;
}

.callout a {
  color: #495057;
  text-decoration: underline;
}

.callout a:hover {
  color: #e9ecef;
}

.callout p:last-child {
  margin-bottom: 0;
}

.callout.callout-danger {
  border-left-color: #bd2130;
}

.callout.callout-warning {
  border-left-color: #d39e00;
}

.callout.callout-info {
  border-left-color: #117a8b;
}

.callout.callout-success {
  border-left-color: #1e7e34;
}


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#prerequisites">Prerequisites</a><ul>
<li><a href="disclaimer.html#disclaimer">Disclaimer</a></li>
<li><a href="is-this-book-for-me.html#is-this-book-for-me">Is this book for me?</a></li>
<li><a href="related-content.html#related-content">Related content</a></li>
<li><a href="acknowledgements.html#acknowledgements">Acknowledgements</a></li>
<li><a href="packages.html#packages">Packages</a></li>
</ul></li>
<li class="has-sub"><a href="1-intro.html#intro"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="1-1-about-the-code.html#about-the-code"><span class="toc-section-number">1.1</span> About the code</a></li>
<li><a href="1-2-preliminary-exercices.html#preliminary-exercices"><span class="toc-section-number">1.2</span> Preliminary exercices</a></li>
</ul></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="has-sub"><a href="2-survival-kit-html.html#survival-kit-html"><span class="toc-section-number">2</span> HTML</a><ul>
<li><a href="2-1-html-basics.html#html-basics"><span class="toc-section-number">2.1</span> HTML Basics</a></li>
<li><a href="2-2-tag-attributes.html#tag-attributes"><span class="toc-section-number">2.2</span> Tag attributes</a></li>
<li><a href="2-3-html-page-skeleton.html#html-page-skeleton"><span class="toc-section-number">2.3</span> HTML page: skeleton</a></li>
<li class="has-sub"><a href="2-4-about-the-document-object-model-dom.html#about-the-document-object-model-dom"><span class="toc-section-number">2.4</span> About the Document Object Model (DOM)</a><ul>
<li><a href="2-4-about-the-document-object-model-dom.html#visualizing-the-dom-the-html-inspector"><span class="toc-section-number">2.4.1</span> Visualizing the DOM: the HTML inspector</a></li>
</ul></li>
<li class="has-sub"><a href="2-5-preliminary-introduction-to-css-and-javascript.html#preliminary-introduction-to-css-and-javascript"><span class="toc-section-number">2.5</span> Preliminary introduction to CSS and JavaScript</a><ul>
<li><a href="2-5-preliminary-introduction-to-css-and-javascript.html#html-and-css"><span class="toc-section-number">2.5.1</span> HTML and CSS</a></li>
<li><a href="2-5-preliminary-introduction-to-css-and-javascript.html#html-and-javascript"><span class="toc-section-number">2.5.2</span> HTML and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="3-survival-kit-javascript.html#survival-kit-javascript"><span class="toc-section-number">3</span> JavaScript</a><ul>
<li><a href="3-1-introduction.html#introduction"><span class="toc-section-number">3.1</span> Introduction</a></li>
<li class="has-sub"><a href="3-2-setup.html#setup"><span class="toc-section-number">3.2</span> Setup</a><ul>
<li><a href="3-2-setup.html#node"><span class="toc-section-number">3.2.1</span> Node</a></li>
<li><a href="3-2-setup.html#choose-a-good-ide"><span class="toc-section-number">3.2.2</span> Choose a good IDE</a></li>
<li><a href="3-2-setup.html#first-script"><span class="toc-section-number">3.2.3</span> First Script</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-programming-with-js-basis.html#programming-with-js-basis"><span class="toc-section-number">3.3</span> Programming with JS: basis</a><ul>
<li><a href="3-3-programming-with-js-basis.html#js-types"><span class="toc-section-number">3.3.1</span> JS types</a></li>
<li><a href="3-3-programming-with-js-basis.html#variables"><span class="toc-section-number">3.3.2</span> Variables</a></li>
<li><a href="3-3-programming-with-js-basis.html#conditions"><span class="toc-section-number">3.3.3</span> Conditions</a></li>
<li><a href="3-3-programming-with-js-basis.html#objects"><span class="toc-section-number">3.3.4</span> Objects</a></li>
<li><a href="3-3-programming-with-js-basis.html#iterations"><span class="toc-section-number">3.3.5</span> Iterations</a></li>
<li><a href="3-3-programming-with-js-basis.html#functions"><span class="toc-section-number">3.3.6</span> Functions</a></li>
<li><a href="3-3-programming-with-js-basis.html#event-listeners"><span class="toc-section-number">3.3.7</span> Event listeners</a></li>
</ul></li>
<li class="has-sub"><a href="3-4-jquery.html#jquery"><span class="toc-section-number">3.4</span> jQuery</a><ul>
<li><a href="3-4-jquery.html#introduction-1"><span class="toc-section-number">3.4.1</span> Introduction</a></li>
<li><a href="3-4-jquery.html#syntax"><span class="toc-section-number">3.4.2</span> Syntax</a></li>
<li><a href="3-4-jquery.html#useful-functions"><span class="toc-section-number">3.4.3</span> Useful functions</a></li>
<li><a href="3-4-jquery.html#chaining-jquery-methods"><span class="toc-section-number">3.4.4</span> Chaining jQuery methods</a></li>
<li><a href="3-4-jquery.html#iterations-1"><span class="toc-section-number">3.4.5</span> Iterations</a></li>
<li><a href="3-4-jquery.html#good-practice"><span class="toc-section-number">3.4.6</span> Good practice</a></li>
<li><a href="3-4-jquery.html#events"><span class="toc-section-number">3.4.7</span> Events</a></li>
<li><a href="3-4-jquery.html#extending-objects"><span class="toc-section-number">3.4.8</span> Extending objects</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Shiny: What’s under the Hood?</b></span></li>
<li class="has-sub"><a href="4-shiny-intro.html#shiny-intro"><span class="toc-section-number">4</span> Introduction</a><ul>
<li><a href="4-1-shiny-html-css-and-javascript.html#shiny-html-css-and-javascript"><span class="toc-section-number">4.1</span> Shiny, HTML, CSS and JavaScript</a></li>
<li><a href="4-2-shiny-websocket.html#shiny-websocket"><span class="toc-section-number">4.2</span> Websocket: R/JS bidirectional communication</a></li>
<li><a href="4-3-shiny-session.html#shiny-session"><span class="toc-section-number">4.3</span> The Shiny session object</a></li>
</ul></li>
<li class="has-sub"><a href="5-shiny-input-system.html#shiny-input-system"><span class="toc-section-number">5</span> Shiny’s input system</a><ul>
<li><a href="5-1-shiny-javascript-sources.html#shiny-javascript-sources"><span class="toc-section-number">5.1</span> Shiny JavaScript sources</a></li>
<li><a href="5-2-the-shiny-javascript-object.html#the-shiny-javascript-object"><span class="toc-section-number">5.2</span> The Shiny JavaScript object</a></li>
<li><a href="5-3-initialization.html#initialization"><span class="toc-section-number">5.3</span> Initialization</a></li>
<li class="has-sub"><a href="5-4-input-bindings.html#input-bindings"><span class="toc-section-number">5.4</span> Input bindings</a><ul>
<li><a href="5-4-input-bindings.html#input-structure"><span class="toc-section-number">5.4.1</span> Input structure</a></li>
<li><a href="5-4-input-bindings.html#binding-shiny-inputs"><span class="toc-section-number">5.4.2</span> Binding Shiny inputs</a></li>
<li><a href="5-4-input-bindings.html#binding-other-elements"><span class="toc-section-number">5.4.3</span> Binding other elements</a></li>
</ul></li>
<li class="has-sub"><a href="5-5-utilities-to-quickly-define-new-inputs.html#utilities-to-quickly-define-new-inputs"><span class="toc-section-number">5.5</span> Utilities to quickly define new inputs</a><ul>
<li><a href="3-1-introduction.html#introduction"><span class="toc-section-number">5.5.1</span> Introduction</a></li>
<li><a href="5-5-utilities-to-quickly-define-new-inputs.html#examples"><span class="toc-section-number">5.5.2</span> Examples</a></li>
<li><a href="5-5-utilities-to-quickly-define-new-inputs.html#custom-data-format"><span class="toc-section-number">5.5.3</span> Custom data format</a></li>
</ul></li>
<li class="has-sub"><a href="5-6-miscellaneous.html#miscellaneous"><span class="toc-section-number">5.6</span> Miscellaneous</a><ul>
<li><a href="5-6-miscellaneous.html#get-access-to-initial-values"><span class="toc-section-number">5.6.1</span> Get access to initial values</a></li>
</ul></li>
</ul></li>
<li><a href="6-shiny-custom-handler.html#shiny-custom-handler"><span class="toc-section-number">6</span> Custom handlers: from R to JavaScript</a></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="has-sub"><a href="7-htmltools-overview.html#htmltools-overview"><span class="toc-section-number">7</span> htmltools overview</a><ul>
<li><a href="7-1-html-tags.html#html-tags"><span class="toc-section-number">7.1</span> HTML Tags</a></li>
<li><a href="7-2-notations.html#notations"><span class="toc-section-number">7.2</span> Notations</a></li>
<li><a href="7-3-adding-new-tags.html#adding-new-tags"><span class="toc-section-number">7.3</span> Adding new tags</a></li>
<li><a href="7-4-alternative-way-to-write-tags.html#alternative-way-to-write-tags"><span class="toc-section-number">7.4</span> Alternative way to write tags</a></li>
<li class="has-sub"><a href="7-5-playing-with-tags.html#playing-with-tags"><span class="toc-section-number">7.5</span> Playing with tags</a><ul>
<li><a href="7-5-playing-with-tags.html#tags-structure"><span class="toc-section-number">7.5.1</span> Tags structure</a></li>
<li><a href="7-5-playing-with-tags.html#useful-functions-for-tags"><span class="toc-section-number">7.5.2</span> Useful functions for tags</a></li>
<li><a href="7-5-playing-with-tags.html#other-interesting-functions"><span class="toc-section-number">7.5.3</span> Other interesting functions</a></li>
<li><a href="7-5-playing-with-tags.html#conditionally-set-attributes"><span class="toc-section-number">7.5.4</span> Conditionally set attributes</a></li>
<li><a href="7-5-playing-with-tags.html#using"><span class="toc-section-number">7.5.5</span> Using %&gt;%</a></li>
<li><a href="7-5-playing-with-tags.html#programmatically-create-children-elements"><span class="toc-section-number">7.5.6</span> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="8-htmltools-dependencies.html#htmltools-dependencies"><span class="toc-section-number">8</span> Dependency utilities</a><ul>
<li><a href="8-1-the-dirty-approach.html#the-dirty-approach"><span class="toc-section-number">8.1</span> The dirty approach</a></li>
<li><a href="8-2-the-clean-approach.html#the-clean-approach"><span class="toc-section-number">8.2</span> The clean approach</a></li>
<li><a href="8-3-another-example-importing-html-dependencies-from-other-packages.html#another-example-importing-html-dependencies-from-other-packages"><span class="toc-section-number">8.3</span> Another example: Importing HTML dependencies from other packages</a></li>
<li><a href="8-4-suppress-dependencies.html#suppress-dependencies"><span class="toc-section-number">8.4</span> Suppress dependencies</a></li>
</ul></li>
<li class="has-sub"><a href="9-htmltools-other-tools.html#htmltools-other-tools"><span class="toc-section-number">9</span> Other tools</a><ul>
<li><a href="9-1-css.html#css"><span class="toc-section-number">9.1</span> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice 1: a dashboard template</b></span></li>
<li><a href="10-custom-templates-selection.html#custom-templates-selection"><span class="toc-section-number">10</span> Template selection</a></li>
<li class="has-sub"><a href="11-custom-templates-package.html#custom-templates-package"><span class="toc-section-number">11</span> Package creation</a><ul>
<li><a href="3-1-introduction.html#introduction"><span class="toc-section-number">11.1</span> Introduction</a></li>
<li><a href="11-2-step-by-step.html#step-by-step"><span class="toc-section-number">11.2</span> Step by step</a></li>
</ul></li>
<li class="has-sub"><a href="12-custom-templates-dependencies.html#custom-templates-dependencies"><span class="toc-section-number">12</span> Define dependencies</a><ul>
<li><a href="12-1-discover-the-project.html#discover-the-project"><span class="toc-section-number">12.1</span> Discover the project</a></li>
<li><a href="12-2-identify-mandatory-dependencies.html#identify-mandatory-dependencies"><span class="toc-section-number">12.2</span> Identify mandatory dependencies</a></li>
<li><a href="12-3-bundle-dependencies.html#bundle-dependencies"><span class="toc-section-number">12.3</span> Bundle dependencies</a></li>
</ul></li>
<li class="has-sub"><a href="13-custom-templates-skeleton.html#custom-templates-skeleton"><span class="toc-section-number">13</span> Template skeleton</a><ul>
<li><a href="13-1-identify-template-elements.html#identify-template-elements"><span class="toc-section-number">13.1</span> Identify template elements</a></li>
<li class="has-sub"><a href="13-2-design-the-page-layout.html#design-the-page-layout"><span class="toc-section-number">13.2</span> Design the page layout</a><ul>
<li><a href="13-2-design-the-page-layout.html#the-page-wrapper"><span class="toc-section-number">13.2.1</span> The page wrapper</a></li>
<li><a href="13-2-design-the-page-layout.html#the-body-content"><span class="toc-section-number">13.2.2</span> The body content</a></li>
<li><a href="13-2-design-the-page-layout.html#the-footer"><span class="toc-section-number">13.2.3</span> The footer</a></li>
<li><a href="13-2-design-the-page-layout.html#the-navbar-or-header"><span class="toc-section-number">13.2.4</span> The navbar (or header)</a></li>
<li><a href="13-2-design-the-page-layout.html#card-containers"><span class="toc-section-number">13.2.5</span> Card containers</a></li>
<li><a href="13-2-design-the-page-layout.html#ribbons-card-components"><span class="toc-section-number">13.2.6</span> Ribbons: card components</a></li>
<li><a href="13-2-design-the-page-layout.html#icons"><span class="toc-section-number">13.2.7</span> Icons</a></li>
</ul></li>
<li><a href="13-3-exercises.html#exercises"><span class="toc-section-number">13.3</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="14-custom-templates-testing.html#custom-templates-testing"><span class="toc-section-number">14</span> Testing and validating templates elements</a><ul>
<li class="has-sub"><a href="14-1-validate-template-functions.html#validate-template-functions"><span class="toc-section-number">14.1</span> Validate template functions</a><ul>
<li><a href="14-1-validate-template-functions.html#create-your-own-validations"><span class="toc-section-number">14.1.1</span> Create your own validations</a></li>
<li><a href="14-1-validate-template-functions.html#existing-utils-functions"><span class="toc-section-number">14.1.2</span> Existing utils functions</a></li>
<li><a href="14-1-validate-template-functions.html#example-refine-navbar-menu-items"><span class="toc-section-number">14.1.3</span> Example: refine navbar menu items</a></li>
</ul></li>
<li class="has-sub"><a href="14-2-testing-templates-elements.html#testing-templates-elements"><span class="toc-section-number">14.2</span> Testing templates elements</a><ul>
<li><a href="14-2-testing-templates-elements.html#testing-template-behavior"><span class="toc-section-number">14.2.1</span> Testing template behavior</a></li>
</ul></li>
<li><a href="14-3-testing-javascript.html#testing-javascript"><span class="toc-section-number">14.3</span> Testing JavaScript</a></li>
</ul></li>
<li class="has-sub"><a href="15-custom-templates-inputs.html#custom-templates-inputs"><span class="toc-section-number">15</span> Develop custom input widgets</a><ul>
<li class="has-sub"><a href="15-1-tabler-action-button.html#tabler-action-button"><span class="toc-section-number">15.1</span> Tabler action button</a><ul>
<li><a href="15-1-tabler-action-button.html#reminders-about-the-action-button"><span class="toc-section-number">15.1.1</span> Reminders about the action button</a></li>
<li><a href="15-1-tabler-action-button.html#application-to-tabler"><span class="toc-section-number">15.1.2</span> Application to Tabler</a></li>
</ul></li>
<li><a href="15-2-toggle-switch.html#toggle-switch"><span class="toc-section-number">15.2</span> Toggle Switch</a></li>
<li><a href="15-3-navbar-menu-input.html#navbar-menu-input"><span class="toc-section-number">15.3</span> Navbar menu input</a></li>
<li><a href="13-3-exercises.html#exercises"><span class="toc-section-number">15.4</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="16-custom-templates-interactivity.html#custom-templates-interactivity"><span class="toc-section-number">16</span> Adding more interactivity</a><ul>
<li><a href="16-1-custom-progress-bars.html#custom-progress-bars"><span class="toc-section-number">16.1</span> Custom progress bars</a></li>
<li class="has-sub"><a href="16-2-user-feedback-toasts.html#user-feedback-toasts"><span class="toc-section-number">16.2</span> User feedback: toasts</a><ul>
<li><a href="16-2-user-feedback-toasts.html#toast-skeleton"><span class="toc-section-number">16.2.1</span> Toast skeleton</a></li>
<li><a href="16-2-user-feedback-toasts.html#the-toast-api"><span class="toc-section-number">16.2.2</span> The toast API</a></li>
<li><a href="16-2-user-feedback-toasts.html#r-implementation"><span class="toc-section-number">16.2.3</span> R implementation</a></li>
<li><a href="16-2-user-feedback-toasts.html#wrap-up"><span class="toc-section-number">16.2.4</span> Wrap up</a></li>
</ul></li>
<li><a href="16-3-transform-an-element-in-a-custom-action-button.html#transform-an-element-in-a-custom-action-button"><span class="toc-section-number">16.3</span> Transform an element in a custom action button</a></li>
<li class="has-sub"><a href="16-4-tab-events.html#tab-events"><span class="toc-section-number">16.4</span> Tab events</a><ul>
<li><a href="16-4-tab-events.html#insert-tabs"><span class="toc-section-number">16.4.1</span> Insert/Remove tabs in tabsetpanel</a></li>
</ul></li>
<li><a href="13-3-exercises.html#exercises"><span class="toc-section-number">16.5</span> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Beautify with CSS and SASS</b></span></li>
<li class="has-sub"><a href="17-beautify-with-fresh.html#beautify-with-fresh"><span class="toc-section-number">17</span> Beautify with fresh</a><ul>
<li><a href="17-1-fresh-the-big-picture.html#fresh-the-big-picture"><span class="toc-section-number">17.1</span> {fresh}, the big picture</a></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="programming-with-js-basis" class="section level2">
<h2><span class="header-section-number">3.3</span> Programming with JS: basis</h2>
<p>We are now all set to introduce the basis of JS. As many languages, JS is made of variables and instructions. All instructions end by the <code>;</code> symbol.</p>
<div id="js-types" class="section level3">
<h3><span class="header-section-number">3.3.1</span> JS types</h3>
<p>JS defines several types:</p>
<ul>
<li>Number: does not distinguish between integers and others (in R for instance, numeric contains integers and double)</li>
<li>String: characters (‘blabla’)</li>
<li>Boolean: true/false</li>
</ul>
<p>To check the type of an element, we may use the <code>typeof</code> operator.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="3-3-programming-with-js-basis.html#cb16-1"></a><span class="kw">typeof</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// number</span></span>
<span id="cb16-2"><a href="3-3-programming-with-js-basis.html#cb16-2"></a><span class="kw">typeof</span> <span class="st">&#39;pouic&#39;</span><span class="op">;</span> <span class="co">// string</span></span></code></pre></div>
<br>
<div class="callout callout-danger">
<p>In JS, <code>typeof</code> is not a function like in R!!! Therefore don’t write <code>typeof('string');</code>.</p>
</div>
<p><br></p>
</div>
<div id="variables" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Variables</h3>
<p>Variables are key elements in programmation. They allow to store intermediate results and do other manipulations. In JS, a variable is defined by:</p>
<ul>
<li>a type</li>
<li>a name</li>
<li>a value</li>
</ul>
<br>
<div class="callout callout-danger">
Valid variable names:
<ul>
<li>
don’t use an existing name like typeof
</li>
<li>
don’t start with a number (123soleil)
</li>
<li>
don’t include any space (total price)
</li>
</ul>
</div>
<p><br></p>
<p>Besides, code style is a critical element in programming, increasing readability, and general consistence. There are several styles, the main ones being <code>snake_case</code> and <code>camelCase</code>. I personally use the camelCase syntax to write variables in JS. To set a variable we use <code>let</code> (there exists <code>var</code> but this is not the latest JS norm (ESMAScript 6 or ES6). You will see later that we still use <code>var</code> in the shiny core and many other R packages).</p>
<p>There are two ways to create variables in JavaScript.</p>
<div id="const" class="section level4">
<h4><span class="header-section-number">3.3.2.1</span> Const</h4>
<p>In JavaScript, a variable may be created with <code>const</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="3-3-programming-with-js-basis.html#cb17-1"></a><span class="kw">const</span> n <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb17-2"><a href="3-3-programming-with-js-basis.html#cb17-2"></a>n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb17-3"><a href="3-3-programming-with-js-basis.html#cb17-3"></a><span class="kw">const</span> n <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb17-4"><a href="3-3-programming-with-js-basis.html#cb17-4"></a><span class="kw">const</span> a<span class="op">;</span></span>
<span id="cb17-5"><a href="3-3-programming-with-js-basis.html#cb17-5"></a>a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// errors</span></span></code></pre></div>
<p>As shown above, such variables:</p>
<ul>
<li>Cannot be modified</li>
<li>Cannot share the same name</li>
<li>Must be assigned a value</li>
</ul>
</div>
<div id="let" class="section level4">
<h4><span class="header-section-number">3.3.2.2</span> let</h4>
<p>Another way to define a variable:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="3-3-programming-with-js-basis.html#cb18-1"></a><span class="kw">let</span> myVariable <span class="op">=</span> <span class="st">&#39;welcome&#39;</span><span class="op">;</span></span>
<span id="cb18-2"><a href="3-3-programming-with-js-basis.html#cb18-2"></a>myVariable <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb18-3"><a href="3-3-programming-with-js-basis.html#cb18-3"></a><span class="va">console</span>.<span class="at">log</span>(myVariable)<span class="op">;</span></span></code></pre></div>
<p>Then we may use all mathematical operators to manipulate our variables.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="3-3-programming-with-js-basis.html#cb19-1"></a><span class="kw">let</span> myNumber <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// affectation</span></span>
<span id="cb19-2"><a href="3-3-programming-with-js-basis.html#cb19-2"></a>myNumber<span class="op">--;</span> <span class="co">// decrement</span></span>
<span id="cb19-3"><a href="3-3-programming-with-js-basis.html#cb19-3"></a><span class="va">console</span>.<span class="at">log</span>(myNumber)<span class="op">;</span> <span class="co">// print 0</span></span></code></pre></div>
<br>
<div class="callout callout-info">
List of numerical operators in JS:
<ul>
<li>
+
</li>
<li>
-
</li>
<li>
*
</li>
<li>
/
</li>
<li>
% (modulo)
</li>
<li>
++ (incrementation)
</li>
<li>
– (decrementation)
</li>
</ul>
</div>
<p><br></p>
<p>To concatenate two strings, we use the<code>+</code> symbol.</p>
<p>You may also know <code>var</code> to declare variables. What is the difference with <code>let</code>? It is mainly a scope <a href="https://www.w3schools.com/js/js_let.asp">reason</a>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="3-3-programming-with-js-basis.html#cb20-1"></a><span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb20-2"><a href="3-3-programming-with-js-basis.html#cb20-2"></a><span class="op">{</span></span>
<span id="cb20-3"><a href="3-3-programming-with-js-basis.html#cb20-3"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// this will modify i globally, not locally</span></span>
<span id="cb20-4"><a href="3-3-programming-with-js-basis.html#cb20-4"></a><span class="op">}</span></span>
<span id="cb20-5"><a href="3-3-programming-with-js-basis.html#cb20-5"></a><span class="va">console</span>.<span class="at">log</span>(<span class="vs">`i is </span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span> <span class="co">// i is 2.</span></span>
<span id="cb20-6"><a href="3-3-programming-with-js-basis.html#cb20-6"></a></span>
<span id="cb20-7"><a href="3-3-programming-with-js-basis.html#cb20-7"></a><span class="kw">let</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb20-8"><a href="3-3-programming-with-js-basis.html#cb20-8"></a><span class="op">{</span></span>
<span id="cb20-9"><a href="3-3-programming-with-js-basis.html#cb20-9"></a>  <span class="kw">let</span> j <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// j is only declared locally and not globally!</span></span>
<span id="cb20-10"><a href="3-3-programming-with-js-basis.html#cb20-10"></a><span class="op">}</span></span>
<span id="cb20-11"><a href="3-3-programming-with-js-basis.html#cb20-11"></a><span class="va">console</span>.<span class="at">log</span>(<span class="vs">`j is </span><span class="sc">${</span>j<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span> <span class="co">// j is 1</span></span></code></pre></div>
</div>
</div>
<div id="conditions" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Conditions</h3>
<p>Below are the operators to check conditions.</p>
<br>
<div class="callout callout-info">
<ul>
<li>
== (A equal B)
</li>
<li>
!= (A not equal to B)
</li>
<li>
&gt; (&gt;=)
</li>
<li>
&lt; (&lt;=)
</li>
<li>
AND (A AND B)
</li>
<li>
OR (A OR B)
</li>
</ul>
</div>
<p><br></p>
<p>To test conditions there exists several ways:</p>
<ul>
<li><code>if (condition) { console.log('Test passed'); }</code></li>
<li><code>if (condition) { instruction A} else { instruction B }</code></li>
</ul>
<p>This is very common to other languages (and R for instance). Whenever a lot of possible conditions need to be evaluated, it is better to choose the <code>switch</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="3-3-programming-with-js-basis.html#cb21-1"></a><span class="cf">switch</span> (variable) <span class="op">{</span></span>
<span id="cb21-2"><a href="3-3-programming-with-js-basis.html#cb21-2"></a>  <span class="cf">case</span> <span class="dt">val1</span><span class="op">:</span> <span class="co">// instruction 1</span></span>
<span id="cb21-3"><a href="3-3-programming-with-js-basis.html#cb21-3"></a>  <span class="cf">break</span><span class="op">;</span> <span class="co">// don&#39;t forget the break!</span></span>
<span id="cb21-4"><a href="3-3-programming-with-js-basis.html#cb21-4"></a>  <span class="cf">case</span> <span class="dt">val2</span><span class="op">:</span>  <span class="co">// instruction 2</span></span>
<span id="cb21-5"><a href="3-3-programming-with-js-basis.html#cb21-5"></a>  <span class="cf">break</span><span class="op">;</span></span>
<span id="cb21-6"><a href="3-3-programming-with-js-basis.html#cb21-6"></a>  <span class="cf">default</span><span class="op">:</span> <span class="co">// when none of val1 and val2 are satisfied</span></span>
<span id="cb21-7"><a href="3-3-programming-with-js-basis.html#cb21-7"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="objects" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Objects</h3>
<p>JavaScript is an object oriented programming language (like Python). An object is defined by:</p>
<ul>
<li>a type</li>
<li>some properties</li>
<li>some methods (to manipulate properties)</li>
</ul>
<p>Let’s define our first object below:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="3-3-programming-with-js-basis.html#cb22-1"></a><span class="kw">const</span> me <span class="op">=</span> <span class="op">{</span></span>
<span id="cb22-2"><a href="3-3-programming-with-js-basis.html#cb22-2"></a>  <span class="dt">name </span><span class="op">:</span> <span class="st">&#39;Divad&#39;</span><span class="op">,</span></span>
<span id="cb22-3"><a href="3-3-programming-with-js-basis.html#cb22-3"></a>  <span class="dt">age </span><span class="op">:</span> <span class="dv">29</span><span class="op">,</span></span>
<span id="cb22-4"><a href="3-3-programming-with-js-basis.html#cb22-4"></a>  <span class="dt">music </span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></span>
<span id="cb22-5"><a href="3-3-programming-with-js-basis.html#cb22-5"></a>  <span class="dt">printName</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb22-6"><a href="3-3-programming-with-js-basis.html#cb22-6"></a>    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`I am </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb22-7"><a href="3-3-programming-with-js-basis.html#cb22-7"></a>  <span class="op">}</span></span>
<span id="cb22-8"><a href="3-3-programming-with-js-basis.html#cb22-8"></a><span class="op">}</span></span>
<span id="cb22-9"><a href="3-3-programming-with-js-basis.html#cb22-9"></a></span>
<span id="cb22-10"><a href="3-3-programming-with-js-basis.html#cb22-10"></a><span class="va">me</span>.<span class="at">geek</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span> <span class="co">// works (see const variables above)</span></span>
<span id="cb22-11"><a href="3-3-programming-with-js-basis.html#cb22-11"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">JSON</span>.<span class="at">stringify</span>(me))<span class="op">;</span> <span class="co">// print a human readable object.</span></span>
<span id="cb22-12"><a href="3-3-programming-with-js-basis.html#cb22-12"></a>  </span>
<span id="cb22-13"><a href="3-3-programming-with-js-basis.html#cb22-13"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">name</span>)<span class="op">;</span></span>
<span id="cb22-14"><a href="3-3-programming-with-js-basis.html#cb22-14"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">age</span>)<span class="op">;</span></span>
<span id="cb22-15"><a href="3-3-programming-with-js-basis.html#cb22-15"></a><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">music</span>)<span class="op">;</span></span>
<span id="cb22-16"><a href="3-3-programming-with-js-basis.html#cb22-16"></a><span class="co">// don&#39;t repeat yourself!!!</span></span>
<span id="cb22-17"><a href="3-3-programming-with-js-basis.html#cb22-17"></a><span class="cf">for</span> (<span class="kw">let</span> key <span class="kw">in</span> me) <span class="op">{</span> <span class="co">// here is it ok to use `in`</span></span>
<span id="cb22-18"><a href="3-3-programming-with-js-basis.html#cb22-18"></a> <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`me[</span><span class="sc">${</span>key<span class="sc">}</span><span class="vs">] is </span><span class="sc">${</span>me[key]<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb22-19"><a href="3-3-programming-with-js-basis.html#cb22-19"></a><span class="op">}</span></span>
<span id="cb22-20"><a href="3-3-programming-with-js-basis.html#cb22-20"></a></span>
<span id="cb22-21"><a href="3-3-programming-with-js-basis.html#cb22-21"></a><span class="va">me</span>.<span class="at">printName</span>()<span class="op">;</span></span>
<span id="cb22-22"><a href="3-3-programming-with-js-basis.html#cb22-22"></a></span>
<span id="cb22-23"><a href="3-3-programming-with-js-basis.html#cb22-23"></a>me <span class="op">=</span> <span class="op">{</span></span>
<span id="cb22-24"><a href="3-3-programming-with-js-basis.html#cb22-24"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Paul&#39;</span><span class="op">,</span></span>
<span id="cb22-25"><a href="3-3-programming-with-js-basis.html#cb22-25"></a>  <span class="dt">age</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb22-26"><a href="3-3-programming-with-js-basis.html#cb22-26"></a><span class="op">}</span> <span class="co">// error (see const variables above)</span></span></code></pre></div>
<p>Some comments on the above code:</p>
<ul>
<li>to access an object propertie, we use <code>object.propertie</code></li>
<li>to print a human readable version of the object <code>JSON.stringify</code> will do the job</li>
<li>we introduced string interpolation with <code>${*}</code>. <code>*</code> may be any valid expression.</li>
<li>methods are accessed like properties (we may also pass parameters). We use <code>this</code> to refer to the object itself. Take note, we will see it a lot!</li>
</ul>
<p>In JavaScript, we can find already predefined objects to interact with arrays, dates.</p>
<div id="arrays" class="section level4">
<h4><span class="header-section-number">3.3.4.1</span> Arrays</h4>
<p>An array is a structure allowing to store informations for instance</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="3-3-programming-with-js-basis.html#cb23-1"></a><span class="kw">const</span> table <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb23-2"><a href="3-3-programming-with-js-basis.html#cb23-2"></a><span class="va">table</span>.<span class="at">push</span>(<span class="st">&#39;hello&#39;</span>)<span class="op">;</span></span>
<span id="cb23-3"><a href="3-3-programming-with-js-basis.html#cb23-3"></a>table <span class="op">=</span> [<span class="dv">2</span>]<span class="op">;</span> <span class="co">// error (as explain in above in the variable part)</span></span>
<span id="cb23-4"><a href="3-3-programming-with-js-basis.html#cb23-4"></a><span class="va">console</span>.<span class="at">log</span>(table)<span class="op">;</span></span></code></pre></div>
<p>Array may be nested</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb24-1"><a href="3-3-programming-with-js-basis.html#cb24-1"></a><span class="kw">const</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb24-2"><a href="3-3-programming-with-js-basis.html#cb24-2"></a><span class="va">console</span>.<span class="at">log</span>(nested)<span class="op">;</span></span></code></pre></div>
<p>In arrays, elements may be accessed by their index, but as mentionned before, the first index is 0 (not 1 like in R). A convenient way to print all arrays’s elements is to use an iteration:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="3-3-programming-with-js-basis.html#cb25-1"></a><span class="kw">const</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></span>
<span id="cb25-2"><a href="3-3-programming-with-js-basis.html#cb25-2"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="kw">of</span> nested) <span class="op">{</span></span>
<span id="cb25-3"><a href="3-3-programming-with-js-basis.html#cb25-3"></a>  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></span>
<span id="cb25-4"><a href="3-3-programming-with-js-basis.html#cb25-4"></a><span class="op">}</span></span>
<span id="cb25-5"><a href="3-3-programming-with-js-basis.html#cb25-5"></a></span>
<span id="cb25-6"><a href="3-3-programming-with-js-basis.html#cb25-6"></a><span class="co">// or with the classic approach</span></span>
<span id="cb25-7"><a href="3-3-programming-with-js-basis.html#cb25-7"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">nested</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></span>
<span id="cb25-8"><a href="3-3-programming-with-js-basis.html#cb25-8"></a>  <span class="va">console</span>.<span class="at">log</span>(nested[i])<span class="op">;</span></span>
<span id="cb25-9"><a href="3-3-programming-with-js-basis.html#cb25-9"></a><span class="op">}</span></span></code></pre></div>
<p>Note that the <code>length</code> method returns the size of an array and is very convenient in for loops. Below is a table referencing the principal methods for arrays (we will use some of them later)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">length</td>
<td align="center">Return the number of elements in an array</td>
</tr>
<tr class="even">
<td align="center">Join(string separator)</td>
<td align="center">Transform an array in a string</td>
</tr>
<tr class="odd">
<td align="center">concat(array1, array2)</td>
<td align="center">Assemble 2 arrays</td>
</tr>
<tr class="even">
<td align="center">pop()</td>
<td align="center">Remove the last element of an array</td>
</tr>
<tr class="odd">
<td align="center">shift()</td>
<td align="center">Remove the first element of an array</td>
</tr>
<tr class="even">
<td align="center">unshift(el1, el2, …)</td>
<td align="center">Insert elements at the beginning of an array</td>
</tr>
<tr class="odd">
<td align="center">push(el1, el2, …)</td>
<td align="center">Add extra elements at the end of an array</td>
</tr>
<tr class="even">
<td align="center">sort()</td>
<td align="center">Sort array elements by increasing value of alphabetical order</td>
</tr>
<tr class="odd">
<td align="center">reverse()</td>
<td align="center">Symetric of sort()</td>
</tr>
</tbody>
</table>
<p>Quite honestly, we mainly use <code>push</code> and <code>length</code> in the next chapters.</p>
</div>
<div id="strings" class="section level4">
<h4><span class="header-section-number">3.3.4.2</span> Strings</h4>
<p>Below are the main methods related to the String object (character in R)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property/Operator</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+ (operator)</td>
<td align="center">String concatenation</td>
</tr>
<tr class="even">
<td align="center">length</td>
<td align="center">String length</td>
</tr>
<tr class="odd">
<td align="center">indexOf()</td>
<td align="center">Gives the position of the character following the input string</td>
</tr>
<tr class="even">
<td align="center">toLowerCase()</td>
<td align="center">Put the string in small letters</td>
</tr>
<tr class="odd">
<td align="center">toUpperCase()</td>
<td align="center">Put the string in capital letters</td>
</tr>
</tbody>
</table>
</div>
<div id="math" class="section level4">
<h4><span class="header-section-number">3.3.4.3</span> Math</h4>
<p>Below we mention some useful methods to handle mathematical objects</p>
<table>
<thead>
<tr class="header">
<th align="center">Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">parseInt()</td>
<td align="center">Convert a string to integer</td>
</tr>
<tr class="even">
<td align="center">parseFloat()</td>
<td align="center">Conversion to floating number</td>
</tr>
</tbody>
</table>
<p>All classic functions like <code>sqrt</code>, trigonometric functions are of course available. We call them with the <code>Math.*</code> prefix.</p>
</div>
</div>
<div id="iterations" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Iterations</h3>
<p>Iterations allow to repeat an instruction or a set of instructions multiple times. Let’s assume we have an array containing 100000 random numbers. How would you do to automatically print them? This a what we are going to see below!</p>
<div id="for-loops" class="section level4">
<h4><span class="header-section-number">3.3.5.1</span> For loops</h4>
<p>The for loop has multiple uses. Below is a classic case where we start by defining the index (variable). We then set an upper bound (the array length) and we finish by incrementing the index value. The code between curly braces is then executed.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="3-3-programming-with-js-basis.html#cb26-1"></a><span class="kw">const</span> table <span class="op">=</span> [...<span class="at">Array</span>(<span class="dv">100</span>).<span class="at">keys</span>()]<span class="op">;</span> <span class="co">// create an empty array of length 100 (so from 0 to 99, not from 1 to 100 like in R!!!)</span></span>
<span id="cb26-2"><a href="3-3-programming-with-js-basis.html#cb26-2"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">table</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></span>
<span id="cb26-3"><a href="3-3-programming-with-js-basis.html#cb26-3"></a>    <span class="va">console</span>.<span class="at">log</span>(table[i])<span class="op">;</span> </span>
<span id="cb26-4"><a href="3-3-programming-with-js-basis.html#cb26-4"></a><span class="op">}</span></span></code></pre></div>
<p>The way we created the array is a bit special and deserves some explanations:</p>
<ul>
<li><code>Array</code> is a method to define a new array. We call it this way <code>Array(arrayLength)</code> since we don’t want to write 100 values 1 by 1. But if you try <code>console.log(Array(10));</code> you will get <code>[ &lt;10 empty items&gt; ]</code>, meaning that 10 slots are available but nothing is inside yet.</li>
<li><code>keys</code> defines keys for each table index. As a reminder, since <code>Array(10)</code> is an object (check with <code>console.log(typeof Array(10));</code>) we may use <code>Array(10).keys()</code>. This creates an Array Iterator</li>
<li><code>...</code> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">spread syntax</a>, and is called with an iterable object (see above)</li>
</ul>
<br>
<div class="callout callout-danger">
<p>NOTE: Contrary to R, JavaScript index starts from 0 (not from 1)! This is good to keep in mind when we will mix both R and JS.</p>
</div>
<p><br></p>
<p>Let’s have a look at the <code>forEach</code> method for arrays (introduced in ES5):</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="3-3-programming-with-js-basis.html#cb27-1"></a><span class="kw">const</span> letters <span class="op">=</span> [<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span>]<span class="op">;</span></span>
<span id="cb27-2"><a href="3-3-programming-with-js-basis.html#cb27-2"></a><span class="va">letters</span>.<span class="at">forEach</span>((letter) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb27-3"><a href="3-3-programming-with-js-basis.html#cb27-3"></a>  <span class="va">console</span>.<span class="at">log</span>(letter)<span class="op">;</span></span>
<span id="cb27-4"><a href="3-3-programming-with-js-basis.html#cb27-4"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Below is another way to create a for loop (introduced in ES6):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="3-3-programming-with-js-basis.html#cb28-1"></a><span class="kw">const</span> samples <span class="op">=</span> [<span class="st">&#39;blabla&#39;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">;</span> <span class="co">// this is an array!</span></span>
<span id="cb28-2"><a href="3-3-programming-with-js-basis.html#cb28-2"></a><span class="cf">for</span> (<span class="kw">let</span> sample <span class="kw">of</span> samples) <span class="op">{</span></span>
<span id="cb28-3"><a href="3-3-programming-with-js-basis.html#cb28-3"></a> <span class="va">console</span>.<span class="at">log</span>(sample)<span class="op">;</span></span>
<span id="cb28-4"><a href="3-3-programming-with-js-basis.html#cb28-4"></a><span class="op">}</span></span></code></pre></div>
<p>What loop <code>for</code> loop should we use? The answer is: it depends on the situation! Actually, there even exists other ways (replace <code>of</code> by <code>in</code> and you get the indexes of the array, like with the first code, but this is really <a href="https://hacks.mozilla.org/2015/04/es6-in-depth-iterators-and-the-for-of-loop/">not recommended</a>).</p>
</div>
<div id="other-iterations-while" class="section level4">
<h4><span class="header-section-number">3.3.5.2</span> Other iterations: while</h4>
<p>While loops are another way to iterate, as long as the condition defined is TRUE. The incrementation step is done at the end of the instruction.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="3-3-programming-with-js-basis.html#cb29-1"></a><span class="kw">const</span> h <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb29-2"><a href="3-3-programming-with-js-basis.html#cb29-2"></a><span class="cf">while</span> (i <span class="op">&lt;=</span> h) <span class="op">{</span></span>
<span id="cb29-3"><a href="3-3-programming-with-js-basis.html#cb29-3"></a>  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></span>
<span id="cb29-4"><a href="3-3-programming-with-js-basis.html#cb29-4"></a>  i<span class="op">++;</span> <span class="co">// we need to increment to avoid infinite loop</span></span>
<span id="cb29-5"><a href="3-3-programming-with-js-basis.html#cb29-5"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Functions</h3>
<p>Functions are useful to wrap a succession of instructions to accomplish a given task. Defining functions allows programmers to save time (less copy and paste, less search and replace), make less errors and easily share code. In modern JavaScript (ES6), functions are defined as follows:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb30-1"><a href="3-3-programming-with-js-basis.html#cb30-1"></a><span class="kw">const</span> a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb30-2"><a href="3-3-programming-with-js-basis.html#cb30-2"></a><span class="kw">const</span> fun <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb30-3"><a href="3-3-programming-with-js-basis.html#cb30-3"></a>  <span class="va">console</span>.<span class="at">log</span>(a)<span class="op">;</span></span>
<span id="cb30-4"><a href="3-3-programming-with-js-basis.html#cb30-4"></a>  <span class="kw">let</span> p <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb30-5"><a href="3-3-programming-with-js-basis.html#cb30-5"></a>  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></span>
<span id="cb30-6"><a href="3-3-programming-with-js-basis.html#cb30-6"></a><span class="op">}</span></span>
<span id="cb30-7"><a href="3-3-programming-with-js-basis.html#cb30-7"></a><span class="kw">let</span> res <span class="op">=</span> <span class="at">fun</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb30-8"><a href="3-3-programming-with-js-basis.html#cb30-8"></a><span class="va">console</span>.<span class="at">log</span>(res)<span class="op">;</span> <span class="co">// prints a and 2. a global</span></span>
<span id="cb30-9"><a href="3-3-programming-with-js-basis.html#cb30-9"></a><span class="va">console</span>.<span class="at">log</span>(p)<span class="op">;</span> <span class="co">// fails because p was defined inside the function</span></span></code></pre></div>
<p>This above functions computes the maximum of 2 provided numbers. Some comments about scoping rules: variables defined inside the function are available for the function, but are not available outside the function definition. It should be noted that functions may use global variables defined outside of it.</p>
<div id="export-functions-about-modules" class="section level4">
<h4><span class="header-section-number">3.3.6.1</span> Export functions: about modules</h4>
<p>What happens if you wrote 100 functions that you want to reuse in different scripts? To prevent copying and pasting, we will now introduce the concept of modules. Let’s save the below function in a script <code>utils.js</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb31-1"><a href="3-3-programming-with-js-basis.html#cb31-1"></a><span class="kw">const</span> findMax <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb31-2"><a href="3-3-programming-with-js-basis.html#cb31-2"></a>  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></span>
<span id="cb31-3"><a href="3-3-programming-with-js-basis.html#cb31-3"></a><span class="op">}</span></span>
<span id="cb31-4"><a href="3-3-programming-with-js-basis.html#cb31-4"></a></span>
<span id="cb31-5"><a href="3-3-programming-with-js-basis.html#cb31-5"></a><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb31-6"><a href="3-3-programming-with-js-basis.html#cb31-6"></a>  findMax <span class="op">=</span> findMax</span>
<span id="cb31-7"><a href="3-3-programming-with-js-basis.html#cb31-7"></a><span class="op">}</span></span></code></pre></div>
<p>Let’s create a <code>test.js</code> script in the same folder that uses the <code>findMax</code> function. To do this, we need to import the corresponding module:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb32-1"><a href="3-3-programming-with-js-basis.html#cb32-1"></a><span class="kw">const</span> <span class="op">{</span>findMax<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./utils.js&#39;</span>)<span class="op">;</span></span>
<span id="cb32-2"><a href="3-3-programming-with-js-basis.html#cb32-2"></a><span class="at">findMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// prints 2</span></span></code></pre></div>
<p>In the next chapters, we will see that some of the underlying JS code to build custom shiny inputs share the same utils functions. Therefore, introducing modules is necessary.</p>
</div>
</div>
<div id="event-listeners" class="section level3">
<h3><span class="header-section-number">3.3.7</span> Event listeners</h3>
<p>When you explore a web application, clicking on a button usually triggers something like a computation, a modal or an alert. How does this work?
In JavaScript, interactivity plays a critical role. Indeed, you want the web application to react to user inputs like mouse clicks, keyboard events. Below we introduce DOM events.</p>
<p>Let’s consider a basic HTML button.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb33-1"><a href="3-3-programming-with-js-basis.html#cb33-1"></a><span class="kw">&lt;button</span><span class="ot"> id=</span><span class="st">&quot;mybutton&quot;</span><span class="kw">&gt;</span>Go!<span class="kw">&lt;/button&gt;</span></span></code></pre></div>
<p>On the JavaScript side, we first capture the button element using its id selector (<code>getElementById</code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb34-1"><a href="3-3-programming-with-js-basis.html#cb34-1"></a><span class="kw">const</span> btn <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;mybutton&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>We then apply the <code>addEventListener</code> method. In short, an event listener is a program that triggers when a given event occurs (we can add multiple event listeners per HTML element). It takes 2 main parameters:</p>
<ul>
<li>the event: click, change, mouseover, …</li>
<li>the function to call</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb35-1"><a href="3-3-programming-with-js-basis.html#cb35-1"></a><span class="va">btn</span>.<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb35-2"><a href="3-3-programming-with-js-basis.html#cb35-2"></a>  <span class="at">alert</span>(<span class="st">&#39;Thanks!&#39;</span>)<span class="op">;</span></span>
<span id="cb35-3"><a href="3-3-programming-with-js-basis.html#cb35-3"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<br>
<div class="callout callout-info">
<p>We could compare the JavaScript events to Shiny observeEvent in which we are listenning to a specific user input.</p>
</div>
<p><br></p>
</div>
</div>
<p style="text-align: center;">
<a href="3-2-setup.html"><button class="btn btn-default">Previous</button></a>
<a href="3-4-jquery.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
