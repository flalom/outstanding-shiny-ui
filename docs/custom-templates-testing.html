<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Testing and validating templates elements | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- CSS --><link rel="stylesheet" href="css/style.css">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.2/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.2/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.1.9000/tabs.js"></script><script src="libs/bs3compat-0.2.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li class="book-part">Unleash {htmltools}: from R to HTML</li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li class="book-part">Beautify with CSS and SASS</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">5</span> Introduction to CSS</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">6</span> Introduction to SASS</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">7</span> Beautify with fresh</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">8</span> Beautify with bootstraplib</a></li>
<li><a class="" href="beautify-other-tools.html"><span class="header-section-number">9</span> Other tools</a></li>
<li class="book-part">Deep dive in the Shiny input system</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Shiny’s internal: session and websockets</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Hidden gems about inputs</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Custom handlers: from R to JavaScript</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Template skeleton</a></li>
<li><a class="active" href="custom-templates-testing.html"><span class="header-section-number">19</span> Testing and validating templates elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">20</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">21</span> Adding more interactivity</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source</a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="custom-templates-testing" class="section level1">
<h1>
<span class="header-section-number">19</span> Testing and validating templates elements<a class="anchor" aria-label="anchor" href="#custom-templates-testing"><i class="fas fa-link"></i></a>
</h1>
<p>Until now, we have been building the template boilerplate, that is the main skeleton functions (page, navbar, navbar menu, …) as well as some components such as cards, ribbons, progress bars. We also exposed some techniques to substantially give more interactivity to the template, leveraging our freshly acquired JavaScript skills. Does this mean we are ready to make the template public? Not yet since some essentials steps are missing:</p>
<ul>
<li>Input validation is a crucial step toward success. Briefly, it consists in checking user inputs so that your functions fail safely and elegantly by providing meaningful error messages or warnings. This concept has already been covered in R for Data Science, Advanced R and a lot of other resources. Hence, I am not trying to reinvent the wheel and we will rely on already existing patterns, whose effectiveness is no longer to be demonstrated. Welcome to the defensive programming world!</li>
<li>On the other hand, testing components allows to check if a functions does what it is supposed to do. Consequently, it is a proof of robustness, and increases reproducibility. It significantly reduces the mental load when it comes to start code refactoring, thereby making you feel slightly less guilty about creating breaking changes since, most of the time, your tests will be able to capture those error.</li>
</ul>
<div id="validate-template-functions" class="section level2">
<h2>
<span class="header-section-number">19.1</span> Validate template functions<a class="anchor" aria-label="anchor" href="#validate-template-functions"><i class="fas fa-link"></i></a>
</h2>
<div id="create-your-own-validations" class="section level3">
<h3>
<span class="header-section-number">19.1.1</span> Create your own validations<a class="anchor" aria-label="anchor" href="#create-your-own-validations"><i class="fas fa-link"></i></a>
</h3>
<p>Below, we will show some examples to validate user inputs. We first consider the <code>tabler_card</code> element from Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">18</a>.</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">status</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">6</span>, <span class="va">stacked</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">padding</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">card_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
    <span class="st">"card"</span>, 
    <span class="kw">if</span> <span class="op">(</span><span class="va">stacked</span><span class="op">)</span> <span class="st">" card-stacked"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">padding</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">" card-"</span>, <span class="va">padding</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"col-md-"</span>, <span class="va">width</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="va">card_cl</span>,
      <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"card-status-top bg-"</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span>
      <span class="op">}</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
        class <span class="op">=</span> <span class="st">"card-body"</span>,
        <span class="co"># we could have a smaller title like h4 or h5...</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-title"</span>, <span class="va">title</span><span class="op">)</span>
        <span class="op">}</span>,
        <span class="va">...</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p>The first thing is to think about what to validate. Here, I see at least 3 test:</p>
<ul>
<li>checking the status value</li>
<li>checking the width value</li>
<li>checking the padding value</li>
</ul>
<p>Writing validation tests requires knowledge about the underlying mechanisms. In our case, we must know the Bootstrap 4 grid rules and valid color statuses. The Bootstrap 4 <a href="https://getbootstrap.com/docs/4.0/layout/grid/">grid</a> ranges from 1 to 12. In other words, a card having a width of 12 will take the full page wherease, we may align 3 cards or width 4. Valid <a href="https://getbootstrap.com/docs/4.0/utilities/colors/">statuses</a> are primary, secondary, success, info, danger, warning, light and dark.</p>
<p>It is therefore pretty straightforward to validate the card width: it must be numeric and between 1 and 12. Moreover, since the template has other containers including the width parameter, we will create a function</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">validate_width</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">width</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">width</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">width</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">||</span> <span class="va">width</span> <span class="op">&gt;</span> <span class="fl">12</span><span class="op">)</span> <span class="op">{</span>
      <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"width must belong to [1, 12], as per Bootstrap 4 grid documentation. See more at https://getbootstrap.com/docs/4.0/layout/grid/"</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"width must be numeric"</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="co"># validate_width(-1)</span>
<span class="co"># validate_width(13)</span>
<span class="co"># validate_width("string")</span></code></pre></div>
<p>To check the status parameter, we save the valid statuses in a vector and take the <code>validStatuses</code> function from shinydashboard <a href="https://github.com/rstudio/shinydashboard/blob/master/R/utils.R">utils</a>. It also make sense to create a function since this parameter is widely used among template components. Contrary to the shinydashboard function, our custom <code>valid_status</code> does not fail if the status is NULL since it is not a mandatory parameter.</p>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">valid_statuses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"primary"</span>, 
  <span class="st">"secondary"</span>,
  <span class="st">"success"</span>, 
  <span class="st">"info"</span>, 
  <span class="st">"warning"</span>, 
  <span class="st">"danger"</span>,
  <span class="st">"light"</span>,
  <span class="st">"dark"</span>
<span class="op">)</span>

<span class="va">validate_status</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">status</span><span class="op">)</span> <span class="op">{</span>

  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> 
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">status</span> <span class="op">%in%</span> <span class="va">valid_statuses</span><span class="op">)</span> <span class="op">{</span>
      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span>

  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"Invalid status: "</span>, <span class="va">status</span>, <span class="st">". Valid statuses are: "</span>,
       <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">valid_statuses</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"."</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We finish by the padding validation. According to the Tabler documentation, there are three possible choices, namely <code>sm</code>, <code>md</code> or <code>lg</code>.</p>
<div class="sourceCode" id="cb328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">valid_paddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sm"</span>, <span class="st">"md"</span>, <span class="st">"lg"</span><span class="op">)</span>

<span class="va">validate_padding</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">padding</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">padding</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">padding</span> <span class="op">%in%</span> <span class="va">valid_paddings</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
      <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"Invalid status: "</span>, <span class="va">padding</span>, <span class="st">". Valid choices are: "</span>,
       <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">valid_paddings</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"."</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>We apply all these validation to our card element.</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">status</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">6</span>, <span class="va">stacked</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">padding</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu">validate_status</span><span class="op">(</span><span class="va">status</span><span class="op">)</span>
  <span class="fu">validate_width</span><span class="op">(</span><span class="va">width</span><span class="op">)</span>
  <span class="fu">validate_padding</span><span class="op">(</span><span class="va">padding</span><span class="op">)</span>
  
  <span class="va">card_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
    <span class="st">"card"</span>, 
    <span class="kw">if</span> <span class="op">(</span><span class="va">stacked</span><span class="op">)</span> <span class="st">" card-stacked"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">padding</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">" card-"</span>, <span class="va">padding</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"col-md-"</span>, <span class="va">width</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="va">card_cl</span>,
      <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"card-status-top bg-"</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span>
      <span class="op">}</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
        class <span class="op">=</span> <span class="st">"card-body"</span>,
        <span class="co"># we could have a smaller title like h4 or h5...</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-title"</span>, <span class="va">title</span><span class="op">)</span>
        <span class="op">}</span>,
        <span class="va">...</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p>As of R 4.0.0, the <code>stopifnot</code> function may be a good alternative to <code>stop</code>.</p>
<p>We recommend to be reasonable and not to validate every single parameter.</p>
</div>
<div id="existing-utils-functions" class="section level3">
<h3>
<span class="header-section-number">19.1.2</span> Existing utils functions<a class="anchor" aria-label="anchor" href="#existing-utils-functions"><i class="fas fa-link"></i></a>
</h3>
<div id="validating-tags" class="section level4">
<h4>
<span class="header-section-number">19.1.2.1</span> Validating tags<a class="anchor" aria-label="anchor" href="#validating-tags"><i class="fas fa-link"></i></a>
</h4>
<p>The problem with the above approach is that it may take time to create all validation functions. Fortunately, packages like {shinydashboard} include really powerful validation functions, especially <code>tagAssert</code>. This function has been included in the book side package so that you may use it at any time.</p>
<div class="sourceCode" id="cb330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">myTag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"bg-blue"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/tagAssert.html">tagAssert</a></span><span class="op">(</span><span class="va">myTag</span>, type <span class="op">=</span> <span class="st">"div"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/tagAssert.html">tagAssert</a></span><span class="op">(</span><span class="va">myTag</span>, type <span class="op">=</span> <span class="st">"li"</span><span class="op">)</span> <span class="co"># will fail</span>
<span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/tagAssert.html">tagAssert</a></span><span class="op">(</span><span class="va">myTag</span>, class <span class="op">=</span> <span class="st">"bg-blue"</span><span class="op">)</span></code></pre></div>
<p>Importantly, <code>tagAssert</code> will raise an error if the condition is not fulfilled. Another function, <code>tagMatches</code> simply returns TRUE/FALSE. It looks for <code>ìd</code>, <code>class</code>, <code>name</code> and any other tag attribute like <code>data-value</code>. Like <code>tagAssert</code>, <code>tagMatches</code> is also available in the book side package.</p>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tagMatches</span><span class="op">(</span><span class="va">myTag</span>, id <span class="op">=</span> <span class="st">"d"</span><span class="op">)</span>
<span class="fu">tagMatches</span><span class="op">(</span><span class="va">myTag</span>, class <span class="op">=</span> <span class="st">"bg-blue"</span><span class="op">)</span></code></pre></div>
</div>
<div id="validating-css-units" class="section level4">
<h4>
<span class="header-section-number">19.1.2.2</span> Validating CSS units<a class="anchor" aria-label="anchor" href="#validating-css-units"><i class="fas fa-link"></i></a>
</h4>
<p>The <code>validateCssUnit</code> belongs to the Shiny exported function. It is useful to validate any parameter involving a CSS unit like <code>width</code> and <code>height</code>.</p>
<p>There is no point to reuse what already exists and these tools will help you to be efficient for validating your template elements.</p>
</div>
</div>
<div id="example-refine-navbar-menu-items" class="section level3">
<h3>
<span class="header-section-number">19.1.3</span> Example: refine navbar menu items<a class="anchor" aria-label="anchor" href="#example-refine-navbar-menu-items"><i class="fas fa-link"></i></a>
</h3>
<div id="avoid-wrong-jquery-selectors" class="section level4">
<h4>
<span class="header-section-number">19.1.3.1</span> Avoid wrong jQuery selectors<a class="anchor" aria-label="anchor" href="#avoid-wrong-jquery-selectors"><i class="fas fa-link"></i></a>
</h4>
<p>In Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">18</a>, we developed the <code>tabler_navbar_menu_item</code> function. The tabName parameter is critical since it is responsible for driving the navigation. We must ensure that the value provided by the user is compatible with jQuery selectors <a href="https://api.jquery.com/category/selectors/">conventions</a>. To illustrate the problem, we consider the example below, where the second tab name is <code>hello%%&amp;1</code>:</p>
<div class="sourceCode" id="cb332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">tabler_page</span><span class="op">(</span>
  <span class="fu">tabler_navbar</span><span class="op">(</span>
    brand_url <span class="op">=</span> <span class="st">"https://preview-dev.tabler.io"</span>, 
    brand_image <span class="op">=</span> <span class="st">"https://preview-dev.tabler.io/static/logo.svg"</span>, 
    nav_menu <span class="op">=</span> <span class="fu">tabler_navbar_menu</span><span class="op">(</span>
      inputId <span class="op">=</span> <span class="st">"mymenu"</span>,
      <span class="fu">tabler_navbar_menu_item</span><span class="op">(</span>
        text <span class="op">=</span> <span class="st">"Tab 1"</span>,
        icon <span class="op">=</span> <span class="cn">NULL</span>,
        tabName <span class="op">=</span> <span class="st">"tab1"</span>,
        selected <span class="op">=</span> <span class="cn">TRUE</span>
      <span class="op">)</span>,
      <span class="fu">tabler_navbar_menu_item</span><span class="op">(</span>
        text <span class="op">=</span> <span class="st">"Tab 2"</span>,
        icon <span class="op">=</span> <span class="cn">NULL</span>,
        tabName <span class="op">=</span> <span class="st">"hello%%&amp;1"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>,
  <span class="fu">tabler_body</span><span class="op">(</span>
    <span class="fu">tabler_tab_items</span><span class="op">(</span>
      <span class="fu">tabler_tab_item</span><span class="op">(</span>
        tabName <span class="op">=</span> <span class="st">"tab1"</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span>
          <span class="st">"obs"</span>, 
          <span class="st">"Number of observations:"</span>,
          min <span class="op">=</span> <span class="fl">0</span>,
          max <span class="op">=</span> <span class="fl">1000</span>, 
          value <span class="op">=</span> <span class="fl">500</span>
        <span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span><span class="st">"distPlot"</span><span class="op">)</span>
      <span class="op">)</span>,
      <span class="fu">tabler_tab_item</span><span class="op">(</span>
        tabName <span class="op">=</span> <span class="st">"hello%%&amp;1"</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Second Tab"</span><span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>,
    footer <span class="op">=</span> <span class="fu">tabler_footer</span><span class="op">(</span>
      left <span class="op">=</span> <span class="st">"Rstats, 2020"</span>, 
      right <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>href <span class="op">=</span> <span class="st">"https://www.google.com"</span>, <span class="st">"More"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">output</span><span class="op">$</span><span class="va">distPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">obs</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>Notice that we cannot see the second tab content. Below is a proposal for the <code>validate_tab</code> function. We first detect any punctuation in the provided input. Although not mandatory, we extract it to send a meaningful error message.
We finally raise an error if any punctuation is found.</p>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">validate_tabName</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">tabName</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"[[:punct:]]"</span>, <span class="va">tabName</span><span class="op">)</span>
  <span class="va">wrong_selector</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/stringr/man/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">tabName</span>, <span class="st">"[[:punct:]]"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span> 
    <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/stringr/man/str_c.html">str_c</a></span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Please do not use punctuation characters like"</span>,  <span class="va">wrong_selector</span>,<span class="st">"in tabNames. This might cause JavaScript issues."</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="co"># validate_tabName("test%") # fails</span>
<span class="fu">validate_tabName</span><span class="op">(</span><span class="st">"plop"</span><span class="op">)</span></code></pre></div>
<p><code>validate_tabName</code> must be then inserted at the beginning of <code>tabler_navbar_menu_item</code> as well as in <code>tabler_tab_item</code>, the latter also relying on tabName.</p>
</div>
<div id="checking-for-multiple-selected-items" class="section level4">
<h4>
<span class="header-section-number">19.1.3.2</span> Checking for multiple selected items<a class="anchor" aria-label="anchor" href="#checking-for-multiple-selected-items"><i class="fas fa-link"></i></a>
</h4>
<p>Another issue is the possibility to have multiple selected tab items at start. Looking back at <code>tabler_navbar_menu</code>, this is not surprising since there are absolutely no checks!</p>
<div class="sourceCode" id="cb334"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_navbar_menu</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"nav nav-pills navbar-nav"</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>A classic method to inspect items provided to <code>tabler_navbar_menu</code> is to capture them in a list. We extract the children of those items <code><a href="https://rdrr.io/r/base/lapply.html">lapply(list(...) , "[", 3)</a></code> (A shiny tag is a structure where the first position holds the tag name, the second is a named list of attributes and the third slot is for children). For each children we apply the shinydashboard internal function <code>findAttribute</code>, that allows to search for a specific attribute value in a given tag. We use the <code>vapply</code> to return an atomic vector (like <code>c(1, 2</code>), lists are vectors but recursive!) and compute the sum of the vector. Each TRUE occurrence is counted as 1 and FALSE 0. Therefore, if the latter is higher than 1, it means that the user provided more than 1 selected tab, which should subsequently raise an error.</p>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_navbar_menu</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> , <span class="va">`[`</span>, <span class="fl">3</span><span class="op">)</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">vapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="va">findAttribute</span>, <span class="st">"class"</span>, <span class="st">"nav-link active"</span>, FUN.VALUE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">res</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"Cannot have multiple selected items at start!"</span><span class="op">)</span>
  
  <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"nav nav-pills navbar-nav"</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># the code below must fail</span>
<span class="va">menu</span> <span class="op">&lt;-</span> <span class="fu">tabler_navbar_menu</span><span class="op">(</span>
  <span class="fu">tabler_navbar_menu_item</span><span class="op">(</span>
    text <span class="op">=</span> <span class="st">"Tab 1"</span>,
    icon <span class="op">=</span> <span class="cn">NULL</span>,
    tabName <span class="op">=</span> <span class="st">"tab1"</span>,
    selected <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span>,
  <span class="fu">tabler_navbar_menu_item</span><span class="op">(</span>
    text <span class="op">=</span> <span class="st">"Tab 2"</span>,
    icon <span class="op">=</span> <span class="cn">NULL</span>,
    tabName <span class="op">=</span> <span class="st">"tab2"</span>,
    selected <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="testing-templates-elements" class="section level2">
<h2>
<span class="header-section-number">19.2</span> Testing templates elements<a class="anchor" aria-label="anchor" href="#testing-templates-elements"><i class="fas fa-link"></i></a>
</h2>
<p>Imagine if one day, someone or yourself accidentally remove the width validation function, after a significant refactoring. Later, you receive a new message from github, stating that someone opened a new issue. According to the report, the card is not properly displayed although no error is thrown. Among the 400 lines of code provided, you hardly notice that the width parameter is set to 13, which is not in line with the Bootstrap 4 documentation, as it should remain between 1 and 12. You lost 10 minutes, so is your end user, which is even worse.</p>
<p>With a proper testing pipeline, this problem could have been avoided. Ironically, writing the corresponding test takes only 2 minutes.</p>
<p>A reference for testing functions is the <a href="https://testthat.r-lib.org/index.html">{testthat}</a> package. In short, a unit test consists in setting expectations about our function and check whether they fail or pass. For instance, with our <code>tabler_card</code> example, the <code>validate_width</code> must fail if the given width is not in the expected bounds or not numeric. We apply the <code>test_that</code> function with a description of the test context, followed by the expectations inside the curly brackets.</p>
<div class="sourceCode" id="cb336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/testthat/man/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"validate width works"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">13</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"hello world"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>We then test <code>validate_status</code> and <code>validate_padding</code>.</p>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/testthat/man/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"validate status works"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>status <span class="op">=</span> <span class="st">"toto"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/testthat/man/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"validate padding works"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"xs"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>So far so good. In few lines of code, we substantially increased the robustness of our function without increasing its complexity. Now, let’s try to remove the <code>validate_width</code> step from the <code>tabler_card</code>.</p>
<div class="sourceCode" id="cb338"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">status</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">6</span>, <span class="va">stacked</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">padding</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu">validate_status</span><span class="op">(</span><span class="va">status</span><span class="op">)</span>
  <span class="fu">validate_padding</span><span class="op">(</span><span class="va">padding</span><span class="op">)</span>
  
  <span class="va">card_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
    <span class="st">"card"</span>, 
    <span class="kw">if</span> <span class="op">(</span><span class="va">stacked</span><span class="op">)</span> <span class="st">" card-stacked"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">padding</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">" card-"</span>, <span class="va">padding</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"col-md-"</span>, <span class="va">width</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="va">card_cl</span>,
      <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"card-status-top bg-"</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span>
      <span class="op">}</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
        class <span class="op">=</span> <span class="st">"card-body"</span>,
        <span class="co"># we could have a smaller title like h4 or h5...</span>
        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-title"</span>, <span class="va">title</span><span class="op">)</span>
        <span class="op">}</span>,
        <span class="va">...</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
  
<span class="op">}</span>


<span class="fu"><a href="https://rdrr.io/pkg/testthat/man/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"validate width works"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">13</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/testthat/man/expect_error.html">expect_error</a></span><span class="op">(</span><span class="fu">tabler_card</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"hello world"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>Notice how the 3 above tests elegantly fail. The provided context (“validate width works”) immediately indicates the culprit, which is a game changer for debugging.</p>
<div id="testing-template-behavior" class="section level3">
<h3>
<span class="header-section-number">19.2.1</span> Testing template behavior<a class="anchor" aria-label="anchor" href="#testing-template-behavior"><i class="fas fa-link"></i></a>
</h3>
<p>DO DO (with crrry)</p>
</div>
</div>
<div id="testing-javascript" class="section level2">
<h2>
<span class="header-section-number">19.3</span> Testing JavaScript<a class="anchor" aria-label="anchor" href="#testing-javascript"><i class="fas fa-link"></i></a>
</h2>
<p>We could not finish this chapter without mentionning tools to validate JavaScript code. We will particularly focus on <a href="https://jshint.com">JSHint</a>, which has a R <a href="https://github.com/dreamRs/jstools">wrapper</a>, nicely provided by the dreamRs team. Below is an example of how to check all the <a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a> JavaScript input bindings at once:</p>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bindings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>
  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"framework7-5.5.0/input-bindings"</span>, package <span class="op">=</span> <span class="st">"shinyMobile"</span><span class="op">)</span>,
  recursive <span class="op">=</span> <span class="cn">TRUE</span>,
  full.names <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/jstools/man/JSHint.html">jshint_file</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">bindings</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/jstools/man/JSHint.html">jshint_options</a></span><span class="op">(</span>jquery <span class="op">=</span> <span class="cn">TRUE</span>, globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Shiny"</span>, <span class="st">"app"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>You may fine tune the <code>jshint_file</code> behavior with the <a href="https://jshint.com/docs/options/"><code>jshint_options</code></a>. One is often tempted to call <code>eval</code> in JS code, which will result in a JSHint error. An option called <code>evil</code> exists to disable the corresponding test. However, we recommand to play the game, accept those error and try to fix them instead of cheating with options!</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Template skeleton</a></div>
<div class="next"><a href="custom-templates-inputs.html"><span class="header-section-number">20</span> Develop custom input widgets</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#custom-templates-testing"><span class="header-section-number">19</span> Testing and validating templates elements</a></li>
<li>
<a class="nav-link" href="#validate-template-functions"><span class="header-section-number">19.1</span> Validate template functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#create-your-own-validations"><span class="header-section-number">19.1.1</span> Create your own validations</a></li>
<li><a class="nav-link" href="#existing-utils-functions"><span class="header-section-number">19.1.2</span> Existing utils functions</a></li>
<li><a class="nav-link" href="#example-refine-navbar-menu-items"><span class="header-section-number">19.1.3</span> Example: refine navbar menu items</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#testing-templates-elements"><span class="header-section-number">19.2</span> Testing templates elements</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#testing-template-behavior"><span class="header-section-number">19.2.1</span> Testing template behavior</a></li></ul>
</li>
<li><a class="nav-link" href="#testing-javascript"><span class="header-section-number">19.3</span> Testing JavaScript</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/custom-templates-testing.Rmd">View source</a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/custom-templates-testing.Rmd">Edit this page</a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It waslast built on 2020-11-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This website is produced by the <a class="text-light" href="https://bookdown.org">bookdown</a> bs4_book template.</p>
  </div>

</div></div>
</footer>
</body>
</html>
