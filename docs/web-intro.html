<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 1 Shiny and the Web | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- CSS --><link rel="stylesheet" href="css/style.css">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.2/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.2/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.1.9000/tabs.js"></script><script src="libs/bs3compat-0.2.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Introduction</li>
<li><a class="active" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li class="book-part">Unleash {htmltools}: from R to HTML</li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li class="book-part">Beautify with CSS and SASS</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">5</span> Introduction to CSS</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">6</span> Introduction to SASS</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">7</span> Beautify with fresh</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">8</span> Beautify with bootstraplib</a></li>
<li><a class="" href="beautify-other-tools.html"><span class="header-section-number">9</span> Other tools</a></li>
<li class="book-part">Deep dive in the Shiny input system</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Shiny’s internal: session and websockets</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Hidden gems about inputs</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Custom handlers: from R to JavaScript</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Template skeleton</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">19</span> Testing and validating templates elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">20</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">21</span> Adding more interactivity</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source</a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="web-intro" class="section level1">
<h1>
<span class="header-section-number">1</span> Shiny and the Web<a class="anchor" aria-label="anchor" href="#web-intro"><i class="fas fa-link"></i></a>
</h1>
<p><a href="http://shiny.rstudio.com">shiny</a> <span class="citation">(Chang, Cheng, Allaire, et al. <a href="references.html#ref-R-shiny" role="doc-biblioref">2020</a>)</span> allows the development of web applications with R in minutes. Let’s face it: this is quite mind blowing! While this may not be a production ready app, it will still be a fully functional, working prototype. Believe me, doing a web application with pure HTML/CSS and JavaScript is more difficult, especially for someone with a non-web developer background.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://shiny.rstudio.com">shiny</a></span><span class="op">)</span></code></pre></div>
<div id="shiny-generates-html-code-from-r" class="section level2">
<h2>
<span class="header-section-number">1.1</span> Shiny generates HTML code from R<a class="anchor" aria-label="anchor" href="#shiny-generates-html-code-from-r"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s start with a little exercise:</p>
<ol style="list-style-type: decimal">
<li>Run the following code:</li>
</ol>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Copy and paste this code to the R console. What do you observe?</li>
</ol>
<p>Notice the output format is an example of an HTML tag. The <code>p</code> function generates HTML (see chapter <a href="htmltools-overview.html#htmltools-overview">3</a>). The main difference between HTML tags and Shiny tags is the absence of closing tag for Shiny. For instance, in raw HTML, we expect <code>&lt;p&gt;</code> to be closed by <code>&lt;/p&gt;</code>. In Shiny, we only call <code><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p(...)</a></code>, where <code>...</code> may be attributes like class/id or children tags. For a R developer, being able to generate HTML code from R allows to remain focused on the main task instead of the web development burdens.
As stated in the general introduction <a href="#intro"><strong>??</strong></a>, a production app sometimes needs to custom elements that are not contained or hidden in Shiny’s core.</p>
<p>Is a Shiny app less customizable than a classic web app? Not at all! Under the hood, Shiny has its own engine to build HTML tags, through R, meaning that all HTML elements are available. You may also include any custom <a href="https://shiny.rstudio.com/articles/packaging-javascript.html">JavaScript</a> or <a href="https://mastering-shiny.org/advanced-ui.html">CSS</a> code.</p>
</div>
<div id="web-intro-html" class="section level2">
<h2>
<span class="header-section-number">1.2</span> HTML 101<a class="anchor" aria-label="anchor" href="#web-intro-html"><i class="fas fa-link"></i></a>
</h2>
<p>This chapter provides a short introduction to the 3 main web languages, namely HTML, CSS and JavaScript.
The following content is crucial to understand part <a href="htmltools-overview.html#htmltools-overview">3</a> about HTML generation from R.</p>
<div id="html-basics" class="section level3">
<h3>
<span class="header-section-number">1.2.1</span> HTML Basics<a class="anchor" aria-label="anchor" href="#html-basics"><i class="fas fa-link"></i></a>
</h3>
<p>HTML (Hypertext Markup Language) is derived from SGML (Standard Generalized markup Language). An HTML file contains tags that may be divided into 2 categories:</p>
<ul>
<li>paired-tags: the text is inserted between the opening and the closing tag</li>
<li>closing-tags</li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb66-1"><a href="web-intro.html#cb66-1"></a><span class="co">&lt;!-- paired-tags --&gt;</span></span>
<span id="cb66-2"><a href="web-intro.html#cb66-2"></a><span class="kw">&lt;p&gt;&lt;/p&gt;</span></span>
<span id="cb66-3"><a href="web-intro.html#cb66-3"></a><span class="kw">&lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb66-4"><a href="web-intro.html#cb66-4"></a></span>
<span id="cb66-5"><a href="web-intro.html#cb66-5"></a><span class="co">&lt;!-- self-closing tags --&gt;</span></span>
<span id="cb66-6"><a href="web-intro.html#cb66-6"></a><span class="kw">&lt;iframe/&gt;</span></span>
<span id="cb66-7"><a href="web-intro.html#cb66-7"></a><span class="kw">&lt;img/&gt;</span></span>
<span id="cb66-8"><a href="web-intro.html#cb66-8"></a><span class="kw">&lt;input/&gt;</span></span>
<span id="cb66-9"><a href="web-intro.html#cb66-9"></a><span class="kw">&lt;br/&gt;</span></span></code></pre></div>
<p>Tags may be divided into 3 categories, based on their role:</p>
<ul>
<li>structure tags: they constitute the skeleton of the HTML page (<code>&lt;title&gt;&lt;/title&gt;</code>, <code>&lt;head&gt;&lt;/head&gt;</code>, <code>&lt;body&gt;&lt;/body&gt;</code>)</li>
<li>control tags: script, inputs and buttons (and more). Their role is to include external resources, provide interactivity with the user</li>
<li>formatting tags: to control the size, font of the wrapped text</li>
</ul>
<p>Finally, we distinguish block and inline elements:</p>
<ul>
<li>block elements may contain other tags and take the full width (block or inline). <code>&lt;div&gt;&lt;/div&gt;</code> is the most commonly used block element. All elements of a block are printed on top of each others</li>
<li>inline elements (for instance <code>&lt;span&gt;&lt;/span&gt;</code>, <code>&lt;a&gt;&lt;/a&gt;</code>) are printed on the same line. They can not contain block tags but may contain other nested inline tags. In practice, we often see <code>&lt;a&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;</code>
</li>
<li>inline-block elements allow to insert block element in an inline</li>
</ul>
<p>Consider the following example. This is clearly a bad use of HTML conventions since an inline tag can not host block elements.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb67-1"><a href="web-intro.html#cb67-1"></a><span class="kw">&lt;span&gt;</span></span>
<span id="cb67-2"><a href="web-intro.html#cb67-2"></a>  <span class="kw">&lt;div&gt;&lt;p&gt;</span>Hello World<span class="kw">&lt;/p&gt;&lt;/div&gt;</span></span>
<span id="cb67-3"><a href="web-intro.html#cb67-3"></a>  <span class="kw">&lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb67-4"><a href="web-intro.html#cb67-4"></a><span class="kw">&lt;/span&gt;</span></span></code></pre></div>
<p>Importantly, <code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> don’t have any semantic meaning, contrary to <code>&lt;header&gt;</code> and <code>&lt;footer&gt;</code>, which allow to structure the HTML page.</p>
</div>
<div id="tag-attributes" class="section level3">
<h3>
<span class="header-section-number">1.2.2</span> Tag attributes<a class="anchor" aria-label="anchor" href="#tag-attributes"><i class="fas fa-link"></i></a>
</h3>
<p>Attributes are text elements allowing to specify some properties of the tag. For instance for a link tag (<code>&lt;a&gt;&lt;/a&gt;</code>), we actually expect more than just the tag itself: a target url and how to open the new page … In all previous examples, tags don’t have any attributes. Yet, there exist a large range of attributes and we will only see 2 of them for now (the reason is that these are the most commonly used in CSS and JavaScript):</p>
<ul>
<li>class: may be shared between multiple tags</li>
<li>id: each must be unique</li>
</ul>
<div class="sourceCode" id="cb68"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb68-1"><a href="web-intro.html#cb68-1"></a><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">"awesome-item"</span><span class="ot"> id=</span><span class="st">"myitem"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb68-2"><a href="web-intro.html#cb68-2"></a><span class="co">&lt;!-- the class awesome-item may be applied to multiple tags --&gt;</span></span>
<span id="cb68-3"><a href="web-intro.html#cb68-3"></a><span class="kw">&lt;span</span><span class="ot"> class=</span><span class="st">"awesome-item"</span><span class="kw">&gt;&lt;/span&gt;</span></span></code></pre></div>
<p>Both attributes are widely used by CSS and JavaScript (see Chapter <a href="survival-kit-javascript.html#survival-kit-javascript">10</a> with the jQuery selectors) to apply a custom style to a web page. Class attributes apply to multiple elements, however the id attribute is restricted to only one item.</p>
<p>Interestingly, there exists another attribute category, know as non-standard attributes like <code>data-toggle</code>. We will see them later in the book (see Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">18</a>).</p>
</div>
<div id="the-simplest-html-skeleton" class="section level3">
<h3>
<span class="header-section-number">1.2.3</span> The simplest HTML skeleton<a class="anchor" aria-label="anchor" href="#the-simplest-html-skeleton"><i class="fas fa-link"></i></a>
</h3>
<p>An HTML page is a collection of tags which will be interpreted by the web browser step by step. The simplest HTML page may be defined as follows:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb69-1"><a href="web-intro.html#cb69-1"></a><span class="dt">&lt;!DOCTYPE </span>HTML<span class="dt">&gt;</span></span>
<span id="cb69-2"><a href="web-intro.html#cb69-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb69-3"><a href="web-intro.html#cb69-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb69-4"><a href="web-intro.html#cb69-4"></a>  <span class="co">&lt;!-- head content here --&gt;</span></span>
<span id="cb69-5"><a href="web-intro.html#cb69-5"></a>    <span class="kw">&lt;title&gt;</span>A title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb69-6"><a href="web-intro.html#cb69-6"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb69-7"><a href="web-intro.html#cb69-7"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb69-8"><a href="web-intro.html#cb69-8"></a>  <span class="co">&lt;!-- body content here --&gt;</span></span>
<span id="cb69-9"><a href="web-intro.html#cb69-9"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb69-10"><a href="web-intro.html#cb69-10"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<ul>
<li>
<code>&lt;html&gt;</code> is the may wrapper</li>
<li>
<code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> are the 2 main children
<ul>
<li>
<code>&lt;head&gt;</code> contains dependencies like styles and JavaScript files (but not only),</li>
<li>
<code>&lt;body&gt;</code> contains the page content and it is displayed on the screen. We will see later that JavaScript files are often added just before the end of the <code>&lt;body&gt;</code>.</li>
</ul>
</li>
</ul>
<div class="warningbox">
<p>Only the <strong>body</strong> content is <strong>displayed</strong> on the screen! W3C <a href="https://validator.w3.org/#validate_by_input">validation</a> imposes at list a <code>title</code> tag in the <code>head</code> section and a <code>lang</code> attribute to the <code>html</code> tag!</p>
</div>
<p>Let’s write the famous Hello World in HTML:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb70-1"><a href="web-intro.html#cb70-1"></a><span class="dt">&lt;!DOCTYPE </span>HTML<span class="dt">&gt;</span></span>
<span id="cb70-2"><a href="web-intro.html#cb70-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb70-3"><a href="web-intro.html#cb70-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb70-4"><a href="web-intro.html#cb70-4"></a>    <span class="co">&lt;!-- head content here --&gt;</span></span>
<span id="cb70-5"><a href="web-intro.html#cb70-5"></a>    <span class="kw">&lt;title&gt;</span>A title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb70-6"><a href="web-intro.html#cb70-6"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb70-7"><a href="web-intro.html#cb70-7"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb70-8"><a href="web-intro.html#cb70-8"></a>    <span class="kw">&lt;p&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span>
<span id="cb70-9"><a href="web-intro.html#cb70-9"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb70-10"><a href="web-intro.html#cb70-10"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>In order to preview this page in a web browser, you need to save the above snippet to a script <code>hello-world.html</code> and double-click on it. It will open with your default web browser.</p>
<p>Below is how we would do with a Shiny app, only for demonstration purpose (static HTML would be enough if no user interaction is required).</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span><span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>From outside, it looks identical even though we’ll see in Chapter <a href="web-dependencies.html#web-dependencies">2</a> that this simple app actually contains much more HTML than our previous example.</p>
</div>
<div id="about-the-document-object-model-dom" class="section level3">
<h3>
<span class="header-section-number">1.2.4</span> About the Document Object Model (DOM)<a class="anchor" aria-label="anchor" href="#about-the-document-object-model-dom"><i class="fas fa-link"></i></a>
</h3>
<p>The DOM stands for “Document Object Model” and is a convenient representation of the html document. There actually exists multiple DOM types, namely DOM-XML and DOM-HTML but we will only focus on the latter. If we consider the last example (Hello World), the associated DOM tree may be inspected in Figure <a href="web-intro.html#fig:html-dom">1.1</a>.</p>
<div id="visualizing-the-dom-with-the-html-inspector" class="section level4">
<h4>
<span class="header-section-number">1.2.4.1</span> Visualizing the DOM with the HTML inspector<a class="anchor" aria-label="anchor" href="#visualizing-the-dom-with-the-html-inspector"><i class="fas fa-link"></i></a>
</h4>
<p>Below, we introduce a tool that will facilitate our exploration of beautiful shiny user interfaces. In this section, we restrict the description to the first panel of the HTML inspector.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;As shown in Figure &lt;a href="web-intro.html#fig:html-dom"&gt;1.1&lt;/a&gt;, the inspector also has tools to debug JavaScript code as demonstrated in &lt;a href="survival-kit-javascript.html#shiny-js-inspector"&gt;10.6&lt;/a&gt;, inspect files, run performances audit, inspect websocket activity (see section &lt;a href="shiny-intro.html#shiny-websocket"&gt;11.2&lt;/a&gt;).&lt;/p&gt;'><sup>1</sup></a> This feature is available in all web browsers, however for demonstration purposes, we will only focus on the <a href="https://developers.google.com/web/tools/chrome-devtools">Chrome DevTools</a>. It may be opened:</p>
<ul>
<li>After a right click and selecting inspect</li>
<li>After clicking on F12 (windows), fn + F12 on Mac (or Command+Option+C)</li>
</ul>
<p>In the following:</p>
<ul>
<li>Open the hello-world.html example with Chrome</li>
<li>Right-click to open the HTML inspector (developer tools must be enabled if it is not the case)</li>
</ul>
<p>The HTML inspector is a convenient tool to explore the structure of the current HTML page. On the left-hand side, the DOM tree is displayed where we clearly see that <code>&lt;html&gt;</code> is the parent of <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>. <code>&lt;body&gt;</code> has also 1 child, that is <code>&lt;p&gt;</code>. We may preview any style (CSS) associated with the selected element on the right panel as well as Event Listeners (JavaScript), which will be discussed later in the book.</p>
<div class="figure">
<span id="fig:html-dom"></span>
<img src="images/survival-kit/dom.png" alt="Inspection of the DOM in the Hello World example" width="100%"><p class="caption">
FIGURE 1.1: Inspection of the DOM in the Hello World example
</p>
</div>
</div>
<div id="html-inspector-101" class="section level4">
<h4>
<span class="header-section-number">1.2.4.2</span> HTML Inspector 101<a class="anchor" aria-label="anchor" href="#html-inspector-101"><i class="fas fa-link"></i></a>
</h4>
<p>In the following, we enumerate key features of the inspector <code>Elements</code> tab. In addition to explore the HTML <a href="https://developers.google.com/web/tools/chrome-devtools/dom">structure</a>, the inspector allows to:</p>
<ul>
<li>Dynamically change CSS at run time</li>
<li>Debug JavaScript code (put break points, …)</li>
<li>Run JavaScript code from the console.</li>
<li>Monitor any error or warning that may prevent your app or website from properly working</li>
</ul>
<p>Another important feature is the ability to switch between different devices, especially mobile platforms and to do a global performance audit with <a href="https://developers.google.com/web/tools/lighthouse">Google LightHouse</a>. The <a href="https://engineering-shiny.org/when-optimize.html#tools-for-profiling">book</a> from Colin Fay et al. details the most relevant elements for Shiny app development.</p>
<p>We propose at set of quick exercises to review the most important HTML inspector capabilities that are commonly needed during Shiny app customization. We consider the app already defined above:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span><span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<div id="altering-the-dom-structure" class="section level5">
<h5>
<span class="header-section-number">1.2.4.2.1</span> Altering the DOM structure<a class="anchor" aria-label="anchor" href="#altering-the-dom-structure"><i class="fas fa-link"></i></a>
</h5>
<ol style="list-style-type: decimal">
<li>Run the <code>Hello World</code> app, right click on the only text element and click on inspect</li>
<li>Notice we could have done similarly by clicking on the very top left corner <code>Inspect</code> icon (Command + maj + C for Mac) and hovering over the <code>Hello World</code> text</li>
</ol>
<p>You should see a result similar to Figure <a href="web-intro.html#fig:html-dom-inspect">1.2</a>, the <code>Inspect</code> icon being in blue. The selected element is highlighted and a white box displays the main CSS properties like <code>text-color</code>, <code>font-size</code>, margins, as well as accessibility parameters.</p>
<div class="figure" style="text-align: center">
<span id="fig:html-dom-inspect"></span>
<img src="images/survival-kit/dom-inspect.png" alt="Inspection of the p element in the Hello World example" width="100%"><p class="caption">
FIGURE 1.2: Inspection of the p element in the Hello World example
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>In the <code>Elements</code> panel, double click between the <code>&lt;p&gt;</code> and <code>&lt;/p&gt;</code> tags to edit the current text. Press enter when finished</li>
<li>Let’s add some children to our <code>p</code> tag. Right click and select the <code>Edit as HTML</code> option. You may enter any valid HTML code inside. Don’t forget about some rules relative to inline and block tags (inline tags cannot contain block tags!!!)</li>
</ol>
<p>As depicted in Figure <a href="web-intro.html#fig:html-dom-edit">1.3</a>, we could have done a right click on the <code>p</code> tag to display more options like:</p>
<ul>
<li>Add/edit an attribute. You may try to add it a class <code>class="awesome-text"</code> and an id <code>id="only-text"</code>
</li>
<li>Delete the current tag (the <code>return</code> key would do it as well)</li>
<li>Copy the element with all nested elements</li>
<li>Only copy the outside HTML (ignore nested elements)</li>
<li>Extract the CSS selector or JavaScript path (code to select the element): <code>body &gt; div &gt; p</code> and <code>document.querySelector("body &gt; div &gt; p")</code>, respectively. These 2 features are extremely powerful as they save you time. Try to copy and paste <code>document.querySelector("body &gt; div &gt; p")</code> in the JavaScript console at the bottom of the inspector window. It returns the selected HTML element, as shown in Figure <a href="web-intro.html#fig:html-dom-js-path">1.4</a>! Amazing isn’ it?</li>
<li>Hide the element</li>
<li>Force a specific state. For instance buttons may be <code>active</code>, <code>inactive</code>
</li>
</ul>
<div class="figure" style="text-align: center">
<span id="fig:html-dom-edit"></span>
<img src="images/survival-kit/dom-edit.png" alt="Modifications of the p element in the Hello World example" width="100%"><p class="caption">
FIGURE 1.3: Modifications of the p element in the Hello World example
</p>
</div>
<div class="figure" style="text-align: center">
<span id="fig:html-dom-js-path"></span>
<img src="images/survival-kit/dom-js-path.png" alt="Extract the JavaScript path to select the p element" width="100%"><p class="caption">
FIGURE 1.4: Extract the JavaScript path to select the p element
</p>
</div>
<p>Whenever you are looking for a specific tag in a more complex page, the <code>search tag</code> option is a game changer (Ctrl + F on Windows, command + F within the Elements tab on a Mac). See Figure <a href="web-intro.html#fig:html-dom-search">1.5</a>.</p>
<div class="figure" style="text-align: center">
<span id="fig:html-dom-search"></span>
<img src="images/survival-kit/dom-search.png" alt='Search for element having the "awesome-text" class' width="100%"><p class="caption">
FIGURE 1.5: Search for element having the “awesome-text” class
</p>
</div>
<p>Finally, the inspector toolkit allows to reorder DOM elements with a rather intuitive drag and drop feature. I invite the reader to carefully explore those features as they will be crucial in the next chapters.</p>
</div>
</div>
</div>
<div id="preliminary-introduction-to-css-and-javascript" class="section level3">
<h3>
<span class="header-section-number">1.2.5</span> Preliminary introduction to CSS and JavaScript<a class="anchor" aria-label="anchor" href="#preliminary-introduction-to-css-and-javascript"><i class="fas fa-link"></i></a>
</h3>
<p>To introduce this section, I propose to look at the very first website, early in the 90’s (August 1991 exactly). From an aesthetic point of view (see Figure <a href="web-intro.html#fig:www-first">1.6</a>), this is far from what we can observe today as shown in Figure <a href="web-intro.html#fig:www-rinterface">1.7</a>.</p>
<div class="figure">
<span id="fig:www-first"></span>
<img src="images/survival-kit/www-first.png" alt="World wide web website" width="100%"><p class="caption">
FIGURE 1.6: World wide web website
</p>
</div>
<div class="figure">
<span id="fig:www-rinterface"></span>
<img src="images/survival-kit/www-rinterface.png" alt="RinteRface website: https://rinterface.com" width="100%"><p class="caption">
FIGURE 1.7: RinteRface website: <a href="https://rinterface.com" class="uri">https://rinterface.com</a>
</p>
</div>
<p>How can we explain that difference? One of the main reason is the absence of CSS (Cascading Style Sheet) since the first CSS release only appeared in December 1996, that is 5 years later than the first web site publication. CSS allows to deeply customize the appearance of any web page by changing colors, fonts, margins and much more. We acknowledge, the role of JavaScript cannot be demonstrated through the previous example. Yet its impact is as important as CSS, so that it is now impossible to dissociate HTML, CSS and JavaScript.</p>
<div id="html-and-css" class="section level4">
<h4>
<span class="header-section-number">1.2.5.1</span> HTML and CSS<a class="anchor" aria-label="anchor" href="#html-and-css"><i class="fas fa-link"></i></a>
</h4>
<p>CSS (Cascading Style Sheets) changes the style of HTML tags by targeting specific classes or ids. For instance, if we want all <code>p</code> tags to have red color we will use:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb73-1"><a href="web-intro.html#cb73-1"></a>p {</span>
<span id="cb73-2"><a href="web-intro.html#cb73-2"></a>  <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></span>
<span id="cb73-3"><a href="web-intro.html#cb73-3"></a>}</span></code></pre></div>
<p>To include CSS in an HTML page, we use the <code>&lt;style&gt;</code> tag as follows:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb74-1"><a href="web-intro.html#cb74-1"></a><span class="dt">&lt;!DOCTYPE </span>HTML<span class="dt">&gt;</span></span>
<span id="cb74-2"><a href="web-intro.html#cb74-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb74-3"><a href="web-intro.html#cb74-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb74-4"><a href="web-intro.html#cb74-4"></a>    <span class="kw">&lt;style</span><span class="ot"> type=</span><span class="st">"text/css"</span><span class="kw">&gt;</span></span>
<span id="cb74-5"><a href="web-intro.html#cb74-5"></a>      p {</span>
<span id="cb74-6"><a href="web-intro.html#cb74-6"></a>        <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></span>
<span id="cb74-7"><a href="web-intro.html#cb74-7"></a>      }</span>
<span id="cb74-8"><a href="web-intro.html#cb74-8"></a>    <span class="kw">&lt;/style&gt;</span></span>
<span id="cb74-9"><a href="web-intro.html#cb74-9"></a>    <span class="kw">&lt;title&gt;</span>A title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb74-10"><a href="web-intro.html#cb74-10"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb74-11"><a href="web-intro.html#cb74-11"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb74-12"><a href="web-intro.html#cb74-12"></a>    <span class="kw">&lt;p&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span>
<span id="cb74-13"><a href="web-intro.html#cb74-13"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb74-14"><a href="web-intro.html#cb74-14"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>You may update the hello-world.html script and run it in your web-browser to see the difference. The example may be slight, but shows how we may control the look and feel of the display. In a development context, we will see later that css files may so big that it is better to include them in external files.</p>
<p>Let’s build a shiny app that does similar things. As a reminder, you may use <code>tags$style</code> to include small pieces of CSS in your app:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="st">"p { color: red;}"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
</div>
<div id="modifying-css-with-the-html-inspector" class="section level4">
<h4>
<span class="header-section-number">1.2.5.2</span> Modifying CSS with the HTML inspector<a class="anchor" aria-label="anchor" href="#modifying-css-with-the-html-inspector"><i class="fas fa-link"></i></a>
</h4>
<div id="add-inline-properties" class="section level5">
<h5>
<span class="header-section-number">1.2.5.2.1</span> Add inline properties<a class="anchor" aria-label="anchor" href="#add-inline-properties"><i class="fas fa-link"></i></a>
</h5>
<p>Run the previous app, right click the <code>p</code> element and open the inspector. In the <code>Styles</code> tab, notice the <code>element.style</code> section. This is to define inline new CSS rules for the selected item. Let’s add 2 rules by clicking inside the <code>element.style</code> container:</p>
<ul>
<li>
<code>border-style: dashed</code>. Indicates we want a box with dashed border</li>
<li>
<code>border-color: ...</code>. To set a border color</li>
</ul>
<p>After typing enter, the inline CSS is automatically added in the tag element.</p>
<p>As you can see, CSS is rather self-explanatory. You probably noticed the auto suggestion feature while typing a property, as shown in Figure <a href="web-intro.html#fig:html-dom-css">1.8</a>. Don’t worry if everything seems overwhelming at the moment. We’ll dedicate an entire part to CSS later in the book.</p>
<div class="figure">
<span id="fig:html-dom-css"></span>
<img src="images/survival-kit/dom-css.png" alt="Edit CSS with Chrome DevTools" width="100%"><p class="caption">
FIGURE 1.8: Edit CSS with Chrome DevTools
</p>
</div>
</div>
<div id="view-local-changes" class="section level5">
<h5>
<span class="header-section-number">1.2.5.2.2</span> View local changes<a class="anchor" aria-label="anchor" href="#view-local-changes"><i class="fas fa-link"></i></a>
</h5>
<p>Whenever playing around with a web page style or a shiny app, it may be good to have an
overview of all changes when you are satisfied about the new design.</p>
<ol style="list-style-type: decimal">
<li>Run the previous shiny app example and open the inspector</li>
<li>In the Styles tab, add some new CSS properties to the first p element set of rules</li>
<li>Once done press enter and click on the file name located at the top-right corner of the property box</li>
<li>This opens the Sources tab. In the left sidebar, right click on the file name (index) and select <code>Local Modifications</code>
</li>
<li>This opens a <code>Git</code> like diff panel called <code>Changes</code> where you can review any change and see the previous values. If you refresh the page, you will loose every local change, unless the persistent authoring feature is active</li>
</ol>
<div class="figure">
<span id="fig:html-dom-css-changes"></span>
<img src="images/survival-kit/dom-css-changes.png" alt="Review all CSS changes" width="100%"><p class="caption">
FIGURE 1.9: Review all CSS changes
</p>
</div>
<p>To get a deeper understanding of the different CSS options please refer to the Google <a href="https://developers.google.com/web/tools/chrome-devtools/css">documentation</a>.</p>
</div>
</div>
<div id="html-and-javascript" class="section level4">
<h4>
<span class="header-section-number">1.2.5.3</span> HTML and JavaScript<a class="anchor" aria-label="anchor" href="#html-and-javascript"><i class="fas fa-link"></i></a>
</h4>
<p>You will see how quickly/seamlessly you may add awesome features to your shiny app.</p>
<p>In the following example, we defined the <code>changeColor</code> function that targets the element
having <code>hello</code> id and change its color property to green. The HTML element has an <code>onClick</code> attribute
that triggers the <code>changeColor</code> function each time the button is clicked.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb76-1"><a href="web-intro.html#cb76-1"></a><span class="dt">&lt;!DOCTYPE </span>HTML<span class="dt">&gt;</span></span>
<span id="cb76-2"><a href="web-intro.html#cb76-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb76-3"><a href="web-intro.html#cb76-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb76-4"><a href="web-intro.html#cb76-4"></a>    <span class="kw">&lt;style</span><span class="ot"> type=</span><span class="st">"text/css"</span><span class="kw">&gt;</span></span>
<span id="cb76-5"><a href="web-intro.html#cb76-5"></a>      p {</span>
<span id="cb76-6"><a href="web-intro.html#cb76-6"></a>        <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></span>
<span id="cb76-7"><a href="web-intro.html#cb76-7"></a>      }</span>
<span id="cb76-8"><a href="web-intro.html#cb76-8"></a>    <span class="kw">&lt;/style&gt;</span></span>
<span id="cb76-9"><a href="web-intro.html#cb76-9"></a>    <span class="kw">&lt;script</span><span class="ot"> language=</span><span class="st">"javascript"</span><span class="kw">&gt;</span></span>
<span id="cb76-10"><a href="web-intro.html#cb76-10"></a>      <span class="co">// displays an alert </span></span>
<span id="cb76-11"><a href="web-intro.html#cb76-11"></a>      <span class="at">alert</span>(<span class="st">'Click on the Hello World text!'</span>)<span class="op">;</span></span>
<span id="cb76-12"><a href="web-intro.html#cb76-12"></a>      <span class="co">// change text color</span></span>
<span id="cb76-13"><a href="web-intro.html#cb76-13"></a>      <span class="kw">function</span> <span class="at">changeColor</span>(color)<span class="op">{</span></span>
<span id="cb76-14"><a href="web-intro.html#cb76-14"></a>        <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">'hello'</span>).<span class="va">style</span>.<span class="at">color</span> <span class="op">=</span> <span class="st">"green"</span><span class="op">;</span></span>
<span id="cb76-15"><a href="web-intro.html#cb76-15"></a>      <span class="op">}</span></span>
<span id="cb76-16"><a href="web-intro.html#cb76-16"></a>    <span class="kw">&lt;/script&gt;</span></span>
<span id="cb76-17"><a href="web-intro.html#cb76-17"></a>    <span class="kw">&lt;title&gt;</span>A title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb76-18"><a href="web-intro.html#cb76-18"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb76-19"><a href="web-intro.html#cb76-19"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb76-20"><a href="web-intro.html#cb76-20"></a>    <span class="co">&lt;!-- onclick attributes applies the JavaScript function changeColor define above --&gt;</span></span>
<span id="cb76-21"><a href="web-intro.html#cb76-21"></a>    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">"hello"</span><span class="ot"> onclick=</span><span class="st">"changeColor('green')"</span><span class="kw">&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span>
<span id="cb76-22"><a href="web-intro.html#cb76-22"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb76-23"><a href="web-intro.html#cb76-23"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>In few lines of code, you can change the color of the text. This is only the beginning!</p>
<p>We see below that the process is not dramatically different in a Shiny app. We wrap our custom JavaScript in the <code>tags$script</code> function (prefer external scripts to add more code), as below:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="va">tags</span><span class="op">$</span><span class="fu">script</span><span class="op">(</span>
    <span class="st">"alert('Click on the Hello World text!');
     // change text color
     function changeColor(color){
       document.getElementById('hello').style.color = 'green';
     }
    "</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"hello"</span>, onclick<span class="op">=</span><span class="st">"changeColor('green')"</span>, <span class="st">"Hello World"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>

<span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>As demonstrated above, developing a shiny app is basically building a website from R and is completely compatible with the web languages, that is CSS and JavaScript. Sections <a href="htmltools-dependencies.html#htmltools-dependencies">4</a> and <a href="shiny-input-system.html#shiny-input-system">12</a> present more robust tools and concepts to extend Shiny.</p>

</div>
</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="index.html">Welcome</a></div>
<div class="next"><a href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#web-intro"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="nav-link" href="#shiny-generates-html-code-from-r"><span class="header-section-number">1.1</span> Shiny generates HTML code from R</a></li>
<li>
<a class="nav-link" href="#web-intro-html"><span class="header-section-number">1.2</span> HTML 101</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#html-basics"><span class="header-section-number">1.2.1</span> HTML Basics</a></li>
<li><a class="nav-link" href="#tag-attributes"><span class="header-section-number">1.2.2</span> Tag attributes</a></li>
<li><a class="nav-link" href="#the-simplest-html-skeleton"><span class="header-section-number">1.2.3</span> The simplest HTML skeleton</a></li>
<li><a class="nav-link" href="#about-the-document-object-model-dom"><span class="header-section-number">1.2.4</span> About the Document Object Model (DOM)</a></li>
<li><a class="nav-link" href="#preliminary-introduction-to-css-and-javascript"><span class="header-section-number">1.2.5</span> Preliminary introduction to CSS and JavaScript</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/web-intro.Rmd">View source</a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/web-intro.Rmd">Edit this page</a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It waslast built on 2020-11-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This website is produced by the <a class="text-light" href="https://bookdown.org">bookdown</a> bs4_book template.</p>
  </div>

</div></div>
</footer>
</body>
</html>
