<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Advance Design | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Advance Design | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Advance Design | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-04-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="advance-design.html"><a href="advance-design.html"><i class="fa fa-check"></i><b>3</b> Advance Design</a><ul>
<li class="chapter" data-level="3.1" data-path="advance-design.html"><a href="advance-design.html#selecting-a-good-template"><i class="fa fa-check"></i><b>3.1</b> Selecting a good template</a></li>
<li class="chapter" data-level="3.2" data-path="advance-design.html"><a href="advance-design.html#about-htmltools"><i class="fa fa-check"></i><b>3.2</b> About htmltools</a><ul>
<li class="chapter" data-level="3.2.1" data-path="advance-design.html"><a href="advance-design.html#html-tags"><i class="fa fa-check"></i><b>3.2.1</b> HTML Tags</a></li>
<li class="chapter" data-level="3.2.2" data-path="advance-design.html"><a href="advance-design.html#dependency-utilities"><i class="fa fa-check"></i><b>3.2.2</b> Dependency utilities</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="advance-design.html"><a href="advance-design.html#template-skeleton"><i class="fa fa-check"></i><b>3.3</b> Template Skeleton</a></li>
<li class="chapter" data-level="3.4" data-path="advance-design.html"><a href="advance-design.html#further-considerations"><i class="fa fa-check"></i><b>3.4</b> Further Considerations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advance-design" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Advance Design</h1>
<p>In this chapter, you will learn how to build your own html templates taken from the web
and package them, so that they can be re-used at any time by anybody.</p>
<div id="selecting-a-good-template" class="section level2">
<h2><span class="header-section-number">3.1</span> Selecting a good template</h2>
<p>There exists tons of HTML templates over the web. However, only a few part will be suitable
for shiny, mainly because of what follows:</p>
<ul>
<li>shiny is built on top of <a href="https://getbootstrap.com/docs/3.3/">bootstrap 3</a> (HTML, CSS and Javascript framework), meaning that going for another framework might
not be straightforward. However, shinymaterial and shiny.semantic are examples showing
this can be possible.</li>
<li>shiny relies on <a href="https://jquery.com">jQuery</a> (currently v 1.12.4 for shiny, whereas the latest version is 3.3.1). Consequently, all templates based upon React, Vue and other Javascript framework will not be natively supported. Again, there exist some <a href="https://github.com/alandipert/react-widget-demo/blob/master/app.R">examples</a> for React with shiny and more generally,
the <a href="https://react-r.github.io/reactR/">reactR</a> package developed by Kent Russell (<span class="citation">(<span class="citeproc-not-found" data-reference-id="timelyportfolio"><strong>???</strong></span>)</span> on Twitter) and Alan Dipert from RStudio.</li>
</ul>
<p>See <a href="https://github.com/rstudio/shiny/tree/master/inst/www/shared">the github repository</a> for more details about all dependencies related to the shiny package.</p>
<p>Therefore in the following, we will restict ourself to Bootstrap (3 and 4) together with jQuery. Don’t be disapointed since there is still a lot to say.</p>
<blockquote>
<p>Notes: As shiny depends on Bootstrap 3.3.7, we recommand the user who would like to
experiment Boostrap 4 features to be particularly careful about potential incompatibilies.
See a working example here with <a href="https://github.com/RinteRface/bs4Dash">bs4Dash</a>.</p>
</blockquote>
<p>A good source of <strong>open source</strong> HTML templates is <a href="https://colorlib.com">Colorlib</a> and <a href="https://www.creative-tim.com/bootstrap-themes/free">Creative Tim</a>. You might also buy your template, but forget about the packaging option, which would be illegal in this particular case, unless you have a legal agreement with the author (very unlikely however).</p>
</div>
<div id="about-htmltools" class="section level2">
<h2><span class="header-section-number">3.2</span> About htmltools</h2>
<p>While building a custom html template, you will need to know more about the wonderful <a href="https://github.com/rstudio/htmltools">htmltools</a> developed by Winston Chang, member of the shiny core team. It has the same spirit as devtools, that is, making your web developer life easier. What follows does not have the pretention to be an exhaustive guide about this package. Yet, it will provide you yith the main
tools to be more efficient.</p>
<div id="html-tags" class="section level3">
<h3><span class="header-section-number">3.2.1</span> HTML Tags</h3>
<p>Both shiny and htmltools contain tags. However, by experience, htmltools contains more exported tags than shiny.
For instance, the HTML <code>&lt;nav&gt;&lt;/nav&gt;</code> tag, namely <code>tags$nav()</code> in R is not included in the shiny package but
in htmltools.</p>
<p>Within your package code, your tags will be like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># we use htmltools tags instead of shiny</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">htmltools<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(...)</a></code></pre></div>
<p>If you had to gather multiple tags together, prefer <code>tagList()</code> as <code>list()</code>, although the HTML output is the same. The first
has the shiny.tag.list class in addition to list.</p>
<div id="notations" class="section level4">
<h4><span class="header-section-number">3.2.1.1</span> Notations</h4>
<p>Whether to use <code>tags$div</code> or <code>div</code> is the tag is exported by default.
For instance, you could use <code>htmltools::div</code> but not <code>htmltools::nav</code> since nav does not
have a dedicated function (only for p, h1, h2, h3, h4, h5, h6, a, br, div, span, pre, code, img, strong, em, hr).
Rather use <code>htmltools::tags$nav</code>. Alternatively, there exists a function (in shiny and htmltools)
called <code>withTags()</code>. Wrapping your code in this function enables you to use <code>withTags(nav(), ...)</code>
instead of <code>tags$nav()</code>.</p>
</div>
<div id="alternative-way-to-write-tags" class="section level4">
<h4><span class="header-section-number">3.2.1.2</span> Alternative way to write tags</h4>
<p>htmltools and shiny come with the <code>HTML()</code> function that you can feed with raw HTML:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">HTML</span>(<span class="st">&#39;&lt;div&gt;Blabla&lt;/div&gt;&#39;</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># will render exactly like</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">div</span>(<span class="st">&quot;Blabla&quot;</span>)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># but there class is different</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw">class</span>(<span class="kw">HTML</span>(<span class="st">&#39;&lt;div&gt;Blabla&lt;/div&gt;&#39;</span>))</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">class</span>(<span class="kw">div</span>(<span class="st">&quot;Blabla&quot;</span>))</a></code></pre></div>
<p>You will not be able to use tag related functions, as in the following parts.
Therefore, I strongly recommand using R and not mixing HTML in R.</p>
</div>
<div id="tags-structure" class="section level4">
<h4><span class="header-section-number">3.2.1.3</span> Tags structure</h4>
<p>According to the htmltools <code>tag()</code> function, a tag has:
- a name such as span, div, h1 …
- attributes, which you can access with <code>tag$attribs</code>
- children, which you can access with <code>tag$children</code>
- a class, namely “shiny.tag”</p>
<p>For instance:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># create the tag</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">myTag &lt;-<span class="st"> </span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="dt">class =</span> <span class="st">&quot;divclass&quot;</span>, </a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="dt">id =</span> <span class="st">&quot;first&quot;</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  <span class="kw">h1</span>(<span class="st">&quot;Here comes your baby&quot;</span>),</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="kw">span</span>(<span class="dt">class =</span> <span class="st">&quot;child&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;baby&quot;</span>, <span class="st">&quot;Ouinnnnn&quot;</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co"># access its name</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">myTag<span class="op">$</span>name</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co"># access its attributes (id and class)</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">myTag<span class="op">$</span>attribs</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co"># access children (returns a list of 2 elements)</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">myTag<span class="op">$</span>children</a></code></pre></div>
<p>How to modify the class of the second child?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">second_children &lt;-<span class="st"> </span>myTag<span class="op">$</span>children[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">second_children<span class="op">$</span>attribs<span class="op">$</span>class &lt;-<span class="st"> &quot;adult&quot;</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">myTag</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co"># Hummm, this is not working ...</span></a></code></pre></div>
<p>The code above is wrong. Indeed, by assigning <code>myTag$children[[2]]</code> to second_children,
<code>second_children$attribs$class &lt;- &quot;adult&quot;</code> modifies the class of the copy and not the
original object. Only one way:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">myTag<span class="op">$</span>children[[<span class="dv">2</span>]]<span class="op">$</span>attribs<span class="op">$</span>class &lt;-<span class="st"> &quot;adult&quot;</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">myTag</a></code></pre></div>
<p>For strongly nested tags, you will see that the following section contains amazing functions,
such as <code>tagAppenChild()</code>.</p>
</div>
<div id="useful-functions-for-tags" class="section level4">
<h4><span class="header-section-number">3.2.1.4</span> Useful functions for Tags</h4>
<p>htmltools and shiny have powerful functions to easily add attributes to tags, check for
existing attributes, get attributes and add other tags to a list of tags.</p>
<ul>
<li><code>tagAppendAttributes()</code>: this function allow you to add a new attribute to the current tag.
For instance, assuming you created a div for which you forgot to add and id attribute:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">mydiv &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="st">&quot;Where is my brain&quot;</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">mydiv &lt;-<span class="st"> </span><span class="kw">tagAppendAttributes</span>(mydiv, <span class="dt">id =</span> <span class="st">&quot;here_it_is&quot;</span>)</a></code></pre></div>
<p>You can pass as many attributes as you want, including non standard attributes such as
<code>data-toggle</code> (see Bootstrap 3 tabs for instance):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">mydiv &lt;-<span class="st"> </span><span class="kw">tagAppendAttributes</span>(mydiv, <span class="st">`</span><span class="dt">data-toggle</span><span class="st">`</span> =<span class="st"> &quot;tabs&quot;</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># even though you could proceed as follows</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">mydiv<span class="op">$</span>attribs[[<span class="st">&quot;aria-controls&quot;</span>]] &lt;-<span class="st"> &quot;home&quot;</span></a></code></pre></div>
<ul>
<li><code>tagHasAttribute()</code>: to check if a tag has a specific attribute</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># I want to know if div has a class</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">mydiv &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;myclass&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">has_class &lt;-<span class="st"> </span><span class="kw">tagHasAttribute</span>(mydiv, <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">has_class</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># if you are familiar with %&gt;%</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">has_class &lt;-<span class="st"> </span>mydiv <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tagHasAttribute</span>(<span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">has_class</a></code></pre></div>
<ul>
<li><code>tagGetAttribute()</code>: to get the value of the targeted attributes, if it exists, otherwise NULL.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">mydiv &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;test&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co"># returns the class</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">tagGetAttribute</span>(mydiv, <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># returns NULL</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">tagGetAttribute</span>(mydiv, <span class="st">&quot;id&quot;</span>)</a></code></pre></div>
<ul>
<li><code>tagAppendChild()</code> and <code>tagAppendChildren()</code>: add other tags to an existing tag.
Whereas <code>tagAppendChild()</code> only takes on tag, you can pass a list of tags to <code>tagAppendChildren()</code>.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">mydiv &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;parent&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;mother&quot;</span>, <span class="st">&quot;Not the mama!!!&quot;</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">otherTag &lt;-<span class="st"> </span><span class="kw">span</span>(<span class="st">&quot;I am your child&quot;</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">mydiv &lt;-<span class="st"> </span><span class="kw">tagAppendChild</span>(mydiv, otherTag)</a></code></pre></div>
<p>You might wonder why there is no <code>tagRemoveChild()</code> or <code>tagRemoveAttributes()</code>.</p>
</div>
<div id="other-interesting-functions" class="section level4">
<h4><span class="header-section-number">3.2.1.5</span> Other interesting functions</h4>
<p>The <a href="https://github.com/ThinkR-open/brighter">brighter</a> package written by Colin Fay contains
very neat functions to edit your tags. Particularly, the <code>tagRemoveAttributes()</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Thinkr-open/brighter&quot;</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">library</span>(brighter)</a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">mydiv &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;test&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;coucou&quot;</span>, <span class="st">&quot;Prout&quot;</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">tagRemoveAttributes</span>(mydiv, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;id&quot;</span>)</a></code></pre></div>
<p>Up to you to create new functions to add in this package and do a nice PR.</p>
</div>
</div>
<div id="dependency-utilities" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Dependency utilities</h3>
<p>When creating a new template, you sometimes need to import custom HTML dependencies
that do not come along with shiny. No problem, htmltools is here for you (shiny also
contains these functions).</p>
<div id="the-dirty-approach" class="section level4">
<h4><span class="header-section-number">3.2.2.1</span> The dirty approach</h4>
<p>Let’s consider the following example. I want to include a bootstrap 4 card in a shiny app.
This example is taken from an interesting question <a href="https://community.rstudio.com/t/create-a-div-using-htmltools-withtags/22439/2">here</a>.
The naive approach would be to include the HTML code directly in the app code</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># we create the card function before</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">my_card &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  htmltools<span class="op">::</span><span class="kw">withTags</span>(</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">      <span class="dt">class =</span> <span class="st">&quot;card border-success mb-3&quot;</span>,</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-header bg-transparent border-success&quot;</span>),</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">        <span class="dt">class =</span> <span class="st">&quot;card-body text-success&quot;</span>,</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">        <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, <span class="st">&quot;title&quot;</span>),</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">        <span class="kw">p</span>(<span class="dt">class =</span> <span class="st">&quot;card-text&quot;</span>, ...)</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">      ),</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-footer bg-transparent border-success&quot;</span>, <span class="st">&quot;footer&quot;</span>)</a>
<a class="sourceLine" id="cb13-15" data-line-number="15">    )</a>
<a class="sourceLine" id="cb13-16" data-line-number="16">  )</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">}</a>
<a class="sourceLine" id="cb13-18" data-line-number="18"></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co"># we build our app</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb13-21" data-line-number="21">    <span class="dt">ui =</span> <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb13-22" data-line-number="22">      <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb13-23" data-line-number="23">       <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb13-24" data-line-number="24">        <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb13-25" data-line-number="25">        <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb13-26" data-line-number="26">        <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb13-27" data-line-number="27">        <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb13-28" data-line-number="28">       )</a>
<a class="sourceLine" id="cb13-29" data-line-number="29">     )</a>
<a class="sourceLine" id="cb13-30" data-line-number="30">    ),</a>
<a class="sourceLine" id="cb13-31" data-line-number="31">    <span class="dt">server =</span> <span class="cf">function</span>(input, output) {}</a>
<a class="sourceLine" id="cb13-32" data-line-number="32">)</a></code></pre></div>
<p>and desesperately see that nothing is displayed. If you remember, this was expected since
shiny does not contain bootstrap 4 dependencies and this card is unfortunately a
bootstrap 4 object. Don’t panic! We just need to tell shiny to load the css we need to display
this card (if required, we could include the javascript as well). We could use either
<code>includeCSS()</code>, <code>tags$head(tags$link(rel = &quot;stylesheet&quot;, type = &quot;text/css&quot;, href = &quot;custom.css&quot;))</code>. See
more <a href="https://shiny.rstudio.com/articles/css.html">here</a>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">    <span class="dt">ui =</span> <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">      <span class="co"># load the css code</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">      <span class="kw">includeCSS</span>(<span class="dt">path =</span> <span class="st">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;</span>),</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">      <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">       <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">        <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">        <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">        <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb14-10" data-line-number="10">        <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">       )</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">     )</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">    ),</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">    <span class="dt">server =</span> <span class="cf">function</span>(input, output) {}</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">)</a></code></pre></div>
<p>The card is ugly (which is another problem we will fix later) but at least displayed.</p>
<p>When I say this approach is dirty, it is because it will not be easily re-usable by others.
Instead, we prefer a packaging approach, like in the next section.</p>
</div>
<div id="the-clean-approach" class="section level4">
<h4><span class="header-section-number">3.2.2.2</span> The clean approach</h4>
<p>We will use the <code>htmlDependency</code> and <code>attachDependencies</code> functions from htmltools.
The htmlDependency takes several arguments:</p>
<ul>
<li>the name of your dependency</li>
<li>the version (useful to remember on which version it is built upon)</li>
<li>a path to the dependency (can be a CDN or a local folder)</li>
<li>script and stylesheet to respectively pass css and scripts</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># handle dependency</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">card_css &lt;-<span class="st"> &quot;bootstrap.min.css&quot;</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">bs4_card_dep &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">  htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">    <span class="dt">name =</span> <span class="st">&quot;bs4_card&quot;</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">    <span class="dt">version =</span> <span class="st">&quot;1.0&quot;</span>,</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">    <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">href =</span> <span class="st">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/&quot;</span>),</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">    <span class="dt">stylesheet =</span> card_css</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">}</a></code></pre></div>
<p>We create the card tag and give it the bootstrap 4 dependency through the <code>attachDependencies()</code>
function.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># create the card</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">my_card &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">  cardTag &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">withTags</span>(</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">      <span class="dt">class =</span> <span class="st">&quot;card border-success mb-3&quot;</span>,</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-header bg-transparent border-success&quot;</span>),</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">        <span class="dt">class =</span> <span class="st">&quot;card-body text-success&quot;</span>,</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">        <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, <span class="st">&quot;title&quot;</span>),</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">        <span class="kw">p</span>(<span class="dt">class =</span> <span class="st">&quot;card-text&quot;</span>, ...)</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">      ),</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-footer bg-transparent border-success&quot;</span>, <span class="st">&quot;footer&quot;</span>)</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">  )</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb16-16" data-line-number="16">  <span class="co"># attach dependencies</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17">  htmltools<span class="op">::</span><span class="kw">attachDependencies</span>(cardTag, <span class="kw">bs4_card_dep</span>())</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb16-19" data-line-number="19">}</a></code></pre></div>
<p>We finally run our app:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># run shiny app </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  <span class="dt">title =</span> <span class="st">&quot;Hello Shiny!&quot;</span>,</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">      <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">      <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">      <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">      <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">    )</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb17-12" data-line-number="12">)</a>
<a class="sourceLine" id="cb17-13" data-line-number="13"></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="kw">shinyApp</span>(ui, <span class="dt">server =</span> <span class="cf">function</span>(input, output) { })</a></code></pre></div>
<p>With this approach, you could develop a package of custom dependencies that people
could use when they need to add custom elements in shiny.</p>
</div>
</div>
</div>
<div id="template-skeleton" class="section level2">
<h2><span class="header-section-number">3.3</span> Template Skeleton</h2>
<p>Now that you have the basis about tags and dependencies, we can go through the template organisation…</p>
<p>TO DO</p>
</div>
<div id="further-considerations" class="section level2">
<h2><span class="header-section-number">3.4</span> Further Considerations</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-advanced-ui.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
